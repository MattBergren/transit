{"version":3,"sources":["pages/personal-health-record.js"],"names":["drugArr","providerArr","providerModal","drugTotal","providerTotal","$carousel","$","changeSlide","$direction","$this","$thisSlide","closest","find","$nextSlide","next","$prevSlide","prev","$cardHeight","outerHeight","hide","attr","show","is","animate","scrollTop","offset","top","animateSlide","$height","TweenLite","set","from","ease","Power2","easeOut","immediateRender","fromTo","addRowToDrugTable","after","dname","strength","name","provider","frequency","date","addRowToProviderTable","specialty","facility","city","state","phone","length","hasClass","initProviderCarousel","slick","updateTableTotals","html","text","window","innerWidth","showRecords","n","each","removeClass","index","addClass","getDataObject","$row","dataObj","obj","data","key","showProviderCarouselModal","idx","modal","showProviderModal","providerSpecialty","providerFacility","providerCity","providerState","providerDate","providerPhone","showDrugModal","drugName","val","drugStrength","drugFrequency","drugProvider","arr","drugDate","split","showEditProviderModal","scrollToElement","selector","time","verticalOffset","element","offsetTop","formatDate","indexOf","finalDate","resetShowAllButton","adaptiveHeight","infinite","nextArrow","prevArrow","initialSlide","removeFromCarousel","document","ready","Date","on","trigger","e","preventDefault","target","pname","$td","st","setTimeout","print","$rows","rowid","remove","valid","$el","formObj","pop","push","getElementById","reset","str","replace","toLowerCase","drugValidator","validate","rules","highlight","unhighlight","errorPlacement","error","append","editDrugValidator","providerValidator","editProviderValidator","change","event","submit","$formValid","$val","get","focus","resetForm","modalTabbing","bind","fn","tabbing","jqSelector","inputs","filter","not","first","which","shiftKey","last","jQuery"],"mappings":"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","file":"personal-health-record.js","sourcesContent":["let drugArr = [];\nlet providerArr = [];\nlet providerModal = [];\nlet drugTotal = 0;\nlet providerTotal = 0;\nlet $carousel = $('#provider-carousel');\n\nfunction changeSlide($direction, $this) {\n  let $thisSlide = $this.closest('.card').find('.card-slide[aria-hidden=false]'),\n      $nextSlide = $thisSlide.next(),\n      $prevSlide = $thisSlide.prev(),\n      $cardHeight = $this.closest('.card-animation-wrapper').outerHeight();\n\n  $thisSlide.hide();\n  $thisSlide.attr('aria-hidden', 'true');\n\n  if ($direction === 'next') {\n    $nextSlide.show();\n    $nextSlide.attr('aria-hidden', 'false');\n  } else if ($direction === 'prev') {\n    $prevSlide.show();\n    $prevSlide.attr('aria-hidden', 'false');\n  }\n\n  if ($nextSlide.is(':last-of-type')) {\n    $('html, body').animate({scrollTop: $nextSlide.closest('.card').offset().top - 15}, 300);\n  }\n\n  animateSlide($this, $cardHeight, $direction);\n}\n\nfunction animateSlide($this, $height, $direction) {\n  TweenLite.set($this.closest('.card-animation-wrapper'), {'height': 'auto'});\n  TweenLite.from($this.closest('.card-animation-wrapper'), 0.5, {'height': $height, ease: Power2.easeOut, immediateRender: false});\n\n  if ($direction ==='next') {\n    TweenLite.fromTo($this.closest('.card-body'), 0.5, {'opacity': '0', 'transform': 'translateY(-20px)'}, {'opacity': '1', 'transform': 'translateY(0)'});\n  } else if ($direction === 'prev') {\n    TweenLite.fromTo($this.closest('.card-body'), 0.5, {'opacity': '0', 'transform': 'translateY(20px)'}, {'opacity': '1', 'transform': 'translateY(0)'});\n  }\n}\n\nfunction addRowToDrugTable() {\n  $('.phr-drug-table tr:not(.drug-row)').after(`\n  <tr class=\"drug-row drug-row__added-by-me\" data-row-id=\"${drugArr[0].dname}\">\n    <td data-drug-name=\"${drugArr[0].dname}\" data-drug-strength=\"${drugArr[0].strength}\">\n      <span class=\"added-drug-name\">${drugArr[0].name} ${drugArr[0].strength}</span> <a href=\"#\" class=\"lowercase added-by-me\">Added by me</a>\n      </td>\n    <td data-drug-provider=\"${drugArr[0].provider}\">\n      <span class=\"provider-name\">${drugArr[0].provider}</span>\n    </td>\n    <td data-drug-frequency=\"${drugArr[0].frequency}\">\n      <span class=\"mobile-table-header\">Frequency</span>\n      <div class=\"table-dots\"></div>\n      <span>${drugArr[0].frequency}</span>\n    </td>\n    <td data-drug-date=\"${drugArr[0].date}\">\n      <span class=\"mobile-table-header\">Date Prescribed</span>\n      <div class=\"table-dots\"></div>\n      <span>${drugArr[0].date}</span>\n    </td>\n  </tr>`);\n}\n\nfunction addRowToProviderTable() {\n  $('.phr-provider-table tr:not(.provider-row)').after(`\n  <tr class=\"provider-row provider-row__added-by-me\" data-row-id=\"${providerArr[0].dname}\">\n      <td data-provider-name=\"${providerArr[0].dname}\">\n        <a href=\"#\" class=\"provider-name\">${providerArr[0].name}</a> <a href=\"#\" class=\"lowercase added-by-me\">Added by me</a>\n      </td>\n      <td data-provider-specialty=\"${providerArr[0].specialty}\">\n        <span class=\"mobile-table-header\">Specialty</span>\n        <div class=\"table-dots\"></div>\n        <span>${providerArr[0].specialty}</span>\n      </td>\n      <td data-provider-facility=\"${providerArr[0].facility}\" class=\"print-only\">\n        <span class=\"mobile-table-header\">Facility</span>\n        <div class=\"table-dots\"></div>\n        <span>${providerArr[0].facility}</span>\n      </td>\n      <td data-provider-city=\"${providerArr[0].city}\" data-provider-state=\"${providerArr[0].state}\">\n        <span class=\"mobile-table-header\">Location</span>\n        <div class=\"table-dots\"></div>\n        <span>${providerArr[0].city}</span>\n      </td>\n      <td data-provider-phone=\"${providerArr[0].phone}\" class=\"print-only\">\n        <span class=\"mobile-table-header\">Phone</span>\n        <div class=\"table-dots\"></div>\n        <span>${providerArr[0].phone}</span>\n      </td>\n      <td data-provider-date=\"${providerArr[0].date}\">\n        <span class=\"mobile-table-header\">Date of Record</span>\n        <div class=\"table-dots\"></div>\n        <span>${providerArr[0].date}</span>\n      </td>\n    </tr>`);\n\n  // Add new provider to carousel modal\n  // is carousel initialized?\n  if ($carousel.length && !$carousel.hasClass('slick-initialized')) {\n    initProviderCarousel();\n  }\n\n  // add new provider slide to carousel\n  $carousel.slick('slickAdd', `\n  <div class=\"container-fluid\" data-slide-name=\"${providerArr[0].dname}\">\n    <div id=\"viewProviderCarouselModalLabel\" class=\"modal-title\">\n      <h1 class=\"h4 margin-small\" id=\"provider-name\" data-provider-name=\"${providerArr[0].dname}\">${providerArr[0].name}</h1>\n      <span class=\"primary-care-provider\"><a href=\"#\" class=\"lowercase added-by-me\">Added by me</a></span>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-sm-12\">\n        <div class=\"table-body margin-small\">\n          <div class=\"table-body-row field--row\">\n            <div class=\"table-body-cell\">\n              <label for=\"provider-name\">Specialty:</label>\n            </div>\n            <div class=\"table-body-cell\" id=\"provider-specialty\">\n              ${providerArr[0].specialty}\n            </div>\n          </div>\n          <div class=\"table-body-row field--row\">\n            <div class=\"table-body-cell\">\n              <label for=\"provider-facility\">Facility:</label>\n            </div>\n            <div class=\"table-body-cell\" id=\"provider-facility\">\n              ${providerArr[0].facility}\n            </div>\n          </div>\n          <div class=\"table-body-row field--row\">\n            <div class=\"table-body-cell\">\n              <label for=\"provider-city\">City:</label>\n            </div>\n            <div class=\"table-body-cell\" id=\"provider-city\">\n              ${providerArr[0].city}\n            </div>\n          </div>\n          <div class=\"table-body-row field--row\">\n            <div class=\"table-body-cell\">\n              <label for=\"provider-phone\">Phone:</label>\n            </div>\n            <div class=\"table-body-cell\" id=\"provider-phone\">\n              ${providerArr[0].phone}\n            </div>\n          </div>\n          <div class=\"table-body-row field--row\">\n            <div class=\"table-body-cell\">\n              <label for=\"provider-date\">Date:</label>\n            </div>\n            <div class=\"table-body-cell\" id=\"provider-date\">\n              ${providerArr[0].date}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>`, true);\n\n  // TweenLite.to($('.provider-row.new'), 2, {\n  //   delay: 3,\n  //   backgroundColor: '#ffffff'\n  // });\n}\n\nfunction updateTableTotals() {\n  drugTotal = $('.phr-drug-table tbody tr.drug-row').length;\n  providerTotal = $('.phr-provider-table').find('tr.provider-row').length;\n\n  $('.show-drug-btn').show();\n  $('.show-provider-btn').show();\n\n  $('.drug-showing-total').html($('.phr-drug-table tr.drug-row:not(.row-hidden), .phr-drug-table tr.drug-row.row-visible').length);\n  $('.drug-total').text(drugTotal);\n  $('.provider-showing-total').html($('.phr-provider-table tr.provider-row:not(.row-hidden), .phr-provider-table tr.provider-row.row-visible').length);\n  $('.provider-total').text(providerTotal);\n\n  $('.show-drug-btn, .show-provider-btn').show();\n\n  if (drugTotal <= 7) {\n    $('.show-drug-btn').hide();\n  }\n\n  if (providerTotal <= 7) {\n    $('.show-provider-btn').hide();\n  }\n\n  if ($(window).innerWidth() < 768) {\n    $('.show-provider-btn').show();\n    if (providerTotal <= 4) {\n      $('.show-provider-btn').hide();\n    }\n  }\n}\n\nfunction showRecords(n) {\n  $('.phr-table tr:not(:first-child)').each(function () {\n    $(this).removeClass('row-hidden row-visible');\n    if ($(this).index() > n) {\n      $(this).addClass('row-hidden');\n    }\n  });\n}\n\nfunction getDataObject($row) {\n  let dataObj = {};\n\n  $row.find('td').each(function () {\n    let obj = $(this).data();\n    for (let key in obj) {\n      dataObj[key] = obj[key] == '--' ? '' : obj[key];\n    }\n  });\n\n  return dataObj;\n}\n\nfunction showProviderCarouselModal(idx) {\n  $('#provider-carousel').data('slide-index', (idx - 1));\n  $('#viewProviderCarouselModal').modal('toggle');\n}\n\nfunction showProviderModal($row) {\n  let dataObj = getDataObject($row);\n\n  $('#viewProviderModal #provider-name').text($row.find('.provider-name').text());\n  $('#viewProviderModal #provider-specialty').text(dataObj.providerSpecialty);\n  $('#viewProviderModal #provider-facility').text(dataObj.providerFacility);\n  $('#viewProviderModal #provider-city').text(dataObj.providerCity);\n  $('#viewProviderModal #provider-state').text(dataObj.providerState);\n  $('#viewProviderModal #provider-date').text(dataObj.providerDate);\n  $('#viewProviderModal #provider-phone').text(dataObj.providerPhone);\n  $('#viewProviderModal').modal('toggle');\n}\n\nfunction showDrugModal($row) {\n  let dataObj = getDataObject($row);\n  let name = $row.find('.added-drug-name').text();\n\n  $('#viewDrugModal').data('row-id', dataObj.drugName);\n  $('#viewDrugModal #drug-name').val(name);\n  $('#viewDrugModal #drug-strength').val(dataObj.drugStrength);\n  $('#viewDrugModal #drug-frequency').val(dataObj.drugFrequency);\n  $('#viewDrugModal #drug-provider').val(dataObj.drugProvider);\n  let arr = dataObj.drugDate.split('/');\n  if (arr.length > 1) {\n    $('#viewDrugModal #drug-date').val(`${arr[2]}-${arr[0]}-${arr[1]}`);\n  }\n  $('#viewDrugModal').modal('toggle');\n}\n\nfunction showEditProviderModal($row) {\n  let dataObj = getDataObject($row);\n  let name = $row.find('.provider-name').text();\n\n  $('#editProviderModal').data('row-id', $row.data('row-id'));\n  $('#editProviderModal #provider-name').val(name);\n  $('#editProviderModal #provider-specialty').val(dataObj.providerSpecialty);\n  $('#editProviderModal #provider-facility').val(dataObj.providerFacility);\n  $('#editProviderModal #provider-city').val(dataObj.providerCity);\n  $('#editProviderModal #provider-state').val(dataObj.providerState);\n  $('#editProviderModal #provider-state').val(dataObj.providerDate);\n  let arr = dataObj.providerDate.split('/');\n  if (arr.length > 1) {\n    $('#editProviderModal #provider-date').val(`${arr[2]}-${arr[0]}-${arr[1]}`);\n  }\n\n  // $('#editProviderModal #provider-date').val(dataObj.providerDate);\n  $('#editProviderModal #provider-phone').val(dataObj.providerPhone);\n  $('#editProviderModal').modal('toggle');\n}\n\nfunction scrollToElement(selector, time, verticalOffset) {\n  time = typeof (time) != 'undefined' ? time : 1000;\n  verticalOffset = typeof (verticalOffset) != 'undefined' ? verticalOffset : 0;\n  element = $(selector);\n  offset = element.offset();\n  offsetTop = offset.top + verticalOffset;\n  $('html, body').animate({\n    scrollTop: offsetTop\n  }, time);\n}\n\nfunction formatDate(date) {\n  if (date.indexOf('/') > -1) { return date; }\n  let arr = date.split('-');\n  let finalDate = `${arr[1]}/${arr[2]}/${arr[0]}`;\n  return finalDate;\n}\n\nfunction resetShowAllButton () {\n  $('.show-drug-btn, .show-provider-btn').removeClass('showingAll');\n  $('.show-drug-btn, .show-provider-btn').text('Show All');\n}\n\nfunction initProviderCarousel() {\n  $carousel.slick({\n    adaptiveHeight: true,\n    infinite: false,\n    nextArrow: $('.slick-next--provider'),\n    prevArrow: $('.slick-prev--provider'),\n    initialSlide: $carousel.data('slide-index')\n  });\n}\n\nfunction removeFromCarousel(name) {\n  $carousel.slick('slickRemove', $carousel.find(`[data-slide-name='${name}']`).data('slick-index'));\n}\n\n$(document).ready(function() {\n  $('.phr-drug-table').addClass('phr-drug-table--isLoaded');\n\n  // remove divider and mirum logo\n  $('.logo-container .logo-divider, .logo-container img:last-of-type').hide();\n\n  let date = new Date();\n  // $('#addProviderModal input[name=\"provider-date\"]').val(date.toLocaleDateString());\n  // $('#addDrugModal input[name=\"drug-date\"]').val(date.toLocaleDateString());\n\n  $(window).on('resize', function () {\n    updateTableTotals();\n\n    if (!$('body').hasClass('expanded')) {\n      resetShowAllButton();\n      if ($(window).innerWidth() < 768) {\n        // show 4 records on mobile\n        showRecords(4);\n      } else {\n        // show 7 records on desktop\n        showRecords(7);\n      }\n    }\n\n    updateTableTotals();\n  }).trigger('resize');\n\n\t$(document).on('click', '.provider-row', function(e) {\n    e.preventDefault();\n    // showProviderModal($(this));\n    if (!$(e.target).hasClass('added-by-me')) {\n      showProviderCarouselModal($(this).index());\n    }\n  });\n\n  // added by me link in drug table\n  $(document).on('click', '.drug-row a.added-by-me', function (e) {\n    e.preventDefault();\n    showDrugModal($(this).closest('.drug-row'));\n  });\n\n  // added by me link in provider table\n  $(document).on('click', '.provider-row a.added-by-me', function (e) {\n    e.preventDefault();\n    showEditProviderModal($(this).closest('.provider-row'));\n  });\n\n  // added by me link in provider carousel\n  $(document).on('click', '.primary-care-provider a.added-by-me', function (e) {\n    e.preventDefault();\n    let pname = $(this).closest('.container-fluid').data('slide-name');\n    let $td = $('.phr-provider-table').find(`td[data-provider-name=${pname}]`);\n    $('#viewProviderCarouselModal').modal('hide');\n\n    let st = setTimeout(() => {\n      showEditProviderModal($td.closest('.provider-row'));\n    }, 500);\n  });\n\n\t$('.phr-print-button').on('click', function(e) {\n    e.preventDefault();\n\t\twindow.print();\n  });\n\n\t$('.show-drug-btn').on('click', function(e) {\n    e.preventDefault();\n\t\tlet $rows = $('.phr-drug-table tr.row-hidden');\n\n\t\tif (!$(this).hasClass('showingAll')) {\n      $(this).addClass('showingAll');\n      $rows.addClass('row-visible');\n      $(this).text('Show Fewer');\n      $('body').addClass('expanded');\n    } else {\n\t\t\t$(this).removeClass('showingAll');\n      $rows.removeClass('row-visible');\n      $(this).text('Show All');\n      $('body').removeClass('expanded');\n    }\n\n    updateTableTotals();\n    scrollToElement('#Drugs', 500, -30);\n  });\n\n  $('.show-provider-btn').on('click', function (e) {\n    e.preventDefault();\n    let $rows = $('.phr-provider-table').find('tr.row-hidden');\n\n    if (!$(this).hasClass('showingAll')) {\n      $(this).addClass('showingAll');\n      $rows.addClass('row-visible');\n      $(this).text('Show Fewer');\n      $('body').addClass('expanded');\n    } else {\n      $(this).removeClass('showingAll');\n      $rows.removeClass('row-visible');\n      $(this).text('Show All');\n      $('body').removeClass('expanded');\n    }\n\n    updateTableTotals();\n    scrollToElement('#Providers', 500, -30);\n  });\n\n  $('.delete-provider-btn').on('click', function (e) {\n    changeSlide('next', $(this));\n    $('#editProviderModal').find('.modal-title h1').text('Delete Provider');\n  });\n\n  $('.delete-provider-yes').on('click', function () {\n    let rowid = $('#editProviderModal').data('row-id');\n    $('.phr-provider-table').find(`[data-row-id='${rowid}']`).remove();\n    updateTableTotals();\n    $('#editProviderModal').find('.modal-title h1').text('Edit or Delete Provider');\n    $('#editProviderModal').modal('hide');\n    removeFromCarousel(rowid);\n    // $carousel.slick('slickRemove', $carousel.find(`[data-slide-name='${rowid}']`).data('slick-index'));\n  });\n\n  $('.delete-provider-no').on('click', function () {\n    changeSlide('prev', $(this));\n    $('#editProviderModal').find('.modal-title h1').text('Delete Provider');\n  });\n\n  $('.save-provider-btn').on('click', function () {\n    let valid = $('#edit-provider-form').valid();\n    let rowid = $('#editProviderModal').data('row-id');\n\n    if (valid) {\n      $('.phr-provider-table').find(`[data-row-id='${rowid}']`).remove();\n\n      let $el = {\n        'name': $('#edit-provider-form input[name=\"provider-name\"]'),\n        'specialty': $('#edit-provider-form select[name=\"provider-specialty\"]'),\n        'city': $('#edit-provider-form input[name=\"provider-city\"]'),\n        'state': $('#edit-provider-form input[name=\"provider-state\"]'),\n        'facility': $('#edit-provider-form input[name=\"provider-facility\"]'),\n        'phone': $('#edit-provider-form input[name=\"provider-phone\"]'),\n        'date': $('#edit-provider-form input[name=\"provider-date\"]')\n      }\n\n      let formObj = {};\n\n      formObj.name = $el.name.val();\n      formObj.specialty = $el.specialty.val() || '--';\n      formObj.facility = $el.facility.val() || '--';\n      // formObj.location = $el.city.val() || '--';\n      formObj.city = $el.city.val() || '--';\n      formObj.phone = $el.phone.val() || '--';\n      // formObj.state = $el.state.val();\n      formObj.date = $el.date.val() ? formatDate($el.date.val()) : '--';\n\n      providerArr.pop();\n      providerArr.push(formObj);\n\n      removeFromCarousel(rowid);\n      addRowToProviderTable();\n      updateTableTotals();\n\n      $('#editProviderModal').modal('hide');\n\n      document.getElementById('edit-provider-form').reset();\n    }\n  });\n\n  $('.delete-drug-btn').on('click', function(e) {\n    changeSlide('next', $(this));\n    $('#viewDrugModal').find('.modal-title h1').text('Delete Drug');\n  });\n\n  $('.delete-drug-yes').on('click', function() {\n    let rowid = $('#viewDrugModal').data('row-id');\n    $('.phr-drug-table').find(`[data-row-id='${rowid}']`).remove();\n    updateTableTotals();\n    $('#viewDrugModal').find('.modal-title h1').text('Edit or Delete Drug');\n    $('#viewDrugModal').modal('hide');\n  });\n\n  $('.delete-drug-no').on('click', function() {\n    changeSlide('prev', $(this));\n    $('#viewDrugModal').find('.modal-title h1').text('Edit or Delete Drug');\n  });\n\n  $('.save-drug-btn').on('click', function(e) {\n    e.preventDefault();\n    let valid = $('#edit-drug-form').valid();\n    let rowid = $('#viewDrugModal').data('row-id');\n\n    if (valid) {\n      $('.phr-drug-table').find(`[data-row-id='${rowid}']`).remove();\n\n      let $el = {\n        'name': $('#edit-drug-form input[name=\"drug-name\"]'),\n        'frequency': $('#edit-drug-form input[name=\"drug-frequency\"]'),\n        'strength': $('#edit-drug-form input[name=\"drug-strength\"]'),\n        'provider': $('#edit-drug-form input[name=\"drug-provider\"]'),\n        'date': $('#edit-drug-form input[name=\"drug-date\"]')\n      }\n\n      let formObj = {};\n\n      formObj.name = $el.name.val();\n      formObj.frequency = $el.frequency.val() || '--';\n      formObj.strength = $el.strength.val() || '';\n      formObj.provider = $el.provider.val() || '--';\n      formObj.date = $el.date.val() ? formatDate($el.date.val()) : '--';\n\n      drugArr.pop();\n      drugArr.push(formObj);\n\n      addRowToDrugTable();\n      updateTableTotals();\n\n      $('#viewDrugModal').modal('hide');\n\n      document.getElementById('edit-drug-form').reset();\n    }\n  });\n\n  $('.add-drug-form-button').on('click', function(e) {\n    e.preventDefault();\n\n    let valid = $('#add-drug-form').valid();\n\n    if (valid) {\n      let $el = {\n        'name': $('#add-drug-form input[name=\"drug-name\"]'),\n        'frequency': $('#add-drug-form input[name=\"drug-frequency\"]'),\n        'strength': $('#add-drug-form input[name=\"drug-strength\"]'),\n        'provider': $('#add-drug-form input[name=\"drug-provider\"]'),\n        'date': $('#add-drug-form input[name=\"drug-date\"]')\n      }\n\n      let formObj = {};\n      let str = $el.name.val();\n\n      formObj.dname = str.replace(/\\W+/g, '-').toLowerCase();\n      formObj.name = $el.name.val();\n      formObj.frequency = $el.frequency.val() || '--';\n      formObj.strength = $el.strength.val() || '';\n      formObj.provider = $el.provider.val() || '--';\n      formObj.date = $el.date.val() ? formatDate($el.date.val()) : '--';\n\n      drugArr.pop();\n      drugArr.push(formObj);\n\n      addRowToDrugTable();\n      updateTableTotals();\n\n      $('#addDrugModal').modal('hide');\n\n      document.getElementById('add-drug-form').reset();\n    }\n  });\n\n  $('.add-provider-form-button').on('click', function (e) {\n    e.preventDefault();\n    let valid = $('#add-provider-form').valid();\n\n    if (valid) {\n      let $el = {\n        'name': $('#add-provider-form input[name=\"provider-name\"]'),\n        'specialty': $('#add-provider-form select[name=\"provider-specialty\"]'),\n        'city': $('#add-provider-form input[name=\"provider-city\"]'),\n        'state': $('#add-provider-form input[name=\"provider-state\"]'),\n        'facility': $('#add-provider-form input[name=\"provider-facility\"]'),\n        'phone': $('#add-provider-form input[name=\"provider-phone\"]'),\n        'date': $('#add-provider-form input[name=\"provider-date\"]')\n      }\n\n      let formObj = {};\n      let str = $el.name.val();\n\n      formObj.dname = str.replace(/\\W+/g, '-').toLowerCase();\n      formObj.name = $el.name.val();\n      formObj.specialty = $el.specialty.val() || '--';\n      formObj.facility = $el.facility.val() || '--';\n      // formObj.location = $el.city.val() || '--';\n      formObj.city = $el.city.val() || '--';\n      formObj.phone = $el.phone.val() || '--';\n      // formObj.state = $el.state.val();\n      formObj.date = $el.date.val() ? formatDate($el.date.val()) : '--';\n\n      providerArr.pop();\n      providerArr.push(formObj);\n\n      addRowToProviderTable();\n      updateTableTotals();\n\n      $('#addProviderModal').modal('hide');\n\n      document.getElementById('add-provider-form').reset();\n    }\n  });\n\n  let drugValidator = $('#add-drug-form').validate({\n    rules: {\n      'drug-name': 'required',\n    },\n    highlight: function (element) {\n      $(element).closest('.field--row').addClass('field-has-error');\n    },\n    unhighlight: function (element) {\n      $(element).closest('.field--row').removeClass('field-has-error');\n    },\n    errorPlacement: function (error, element) {\n      element.closest('.field--row').find('.table-body-cell:nth-of-type(2)').append(error);\n    }\n  });\n\n  let editDrugValidator = $('#edit-drug-form').validate({\n    rules: {\n      'drug-name': 'required',\n    },\n    highlight: function (element) {\n      $(element).closest('.field--row').addClass('field-has-error');\n    },\n    unhighlight: function (element) {\n      $(element).closest('.field--row').removeClass('field-has-error');\n    },\n    errorPlacement: function (error, element) {\n      element.closest('.field--row').find('.table-body-cell:nth-of-type(2)').append(error);\n    }\n  });\n\n  let providerValidator = $('#add-provider-form').validate({\n    rules: {\n      'provider-name': 'required',\n    },\n    highlight: function (element) {\n      $(element).closest('.field--row').addClass('field-has-error');\n    },\n    unhighlight: function (element) {\n      $(element).closest('.field--row').removeClass('field-has-error');\n    },\n    errorPlacement: function (error, element) {\n      element.closest('.field--row').find('.table-body-cell:nth-of-type(2)').append(error);\n    }\n  });\n\n  let editProviderValidator = $('#edit-provider-form').validate({\n    rules: {\n      'provider-name': 'required',\n    },\n    highlight: function (element) {\n      $(element).closest('.field--row').addClass('field-has-error');\n    },\n    unhighlight: function (element) {\n      $(element).closest('.field--row').removeClass('field-has-error');\n    },\n    errorPlacement: function (error, element) {\n      element.closest('.field--row').find('.table-body-cell:nth-of-type(2)').append(error);\n    }\n  });\n\n  $('#email-records-form').validate({\n    rules: {\n      'message-email': 'required',\n      'message-email-confirm': 'required'\n    },\n    highlight: function (element) {\n      $(element).closest('.field').addClass('field-has-error');\n    },\n    unhighlight: function (element) {\n      $(element).closest('.field').removeClass('field-has-error');\n    },\n    errorPlacement: function (error, element) {\n      element.closest('.field').find('.table-body-cell:nth-of-type(2)').append(error);\n    }\n  });\n\n  // Show new email fields\n  $('input[name=message-email-type]').change(function (event) {\n    if ($('#message-new-email').is(':checked')) {\n      $('#new-email-fields').removeClass('hidden');\n    } else {\n      $('#new-email-fields').addClass('hidden');\n    }\n  });\n\n  // Message submit\n  $('#email-records-form').submit(function (event) {\n    event.preventDefault();\n\n    let $formValid = $('#email-records-form').valid(),\n      $val = $(this).find('input[type=radio]:checked').val();\n\n    if ($val === 'message-old-email') {\n      changeSlide('next', $(this));\n      $('.email-cancel-link').hide();\n    } else {\n      if ($formValid) {\n        changeSlide('next', $(this));\n        $('.email-cancel-link').hide();\n      }\n    }\n  });\n\n  $('#message-send').on('click', function(e) {\n    changeSlide('prev', $(this));\n  });\n\n  $('#addDrugModal, #addProviderModal').on('show.bs.modal', function (e) {\n    $(this).find('form').get(0).reset();\n  });\n\n  $('#viewProviderCarouselModal').on('shown.bs.modal', function (e) {\n    $(this).find('provider-carousel').focus();\n    // Provider carousel\n    if ($carousel.length && !$carousel.hasClass('slick-initialized')) {\n      initProviderCarousel();\n    } else {\n      $carousel.slick('slickGoTo', $carousel.data('slide-index'), true);\n    }\n  });\n\n  $('#viewDrugModal').on('hidden.bs.modal', function (e) {\n    $('#viewDrugModal .card-slide:first-child').show();\n    $('#viewDrugModal .card-slide:first-child').attr('aria-hidden', 'false');\n    $('#viewDrugModal .card-slide:last-child').hide();\n    $('#viewDrugModal .card-slide:last-child').attr('aria-hidden', 'true');\n    $('#viewDrugModal').find('.modal-title h1').text('Edit or Delete Drug');\n    document.getElementById('edit-drug-form').reset();\n  });\n\n  $('#editProviderModal').on('hidden.bs.modal', function (e) {\n    $('#editProviderModal .card-slide:first-child').show();\n    $('#editProviderModal .card-slide:first-child').attr('aria-hidden', 'false');\n    $('#editProviderModal .card-slide:last-child').hide();\n    $('#editProviderModal .card-slide:last-child').attr('aria-hidden', 'true');\n    $('#editProviderModal').find('.modal-title h1').text('Edit or Delete Provider');\n    document.getElementById('edit-provider-form').reset();\n  });\n\n  $('#addProviderModal, #editProviderModal').on('hidden.bs.modal', function (e) {\n    $(this).find('.field--row').removeClass('field-has-error');\n    providerValidator.resetForm();\n  });\n\n  $('#addDrugModal, #viewDrugModal').on('hidden.bs.modal', function (e) {\n    $(this).find('.field--row').removeClass('field-has-error');\n    drugValidator.resetForm();\n    editDrugValidator.resetForm();\n  });\n\n  $('#viewDrugModal, #editProviderModal, #addDrugModal, #addProviderModal').modalTabbing();\n\n  $(window.document).on('shown.bs.modal', '.modal', function () {\n    window.setTimeout(function () {\n      $('[data-modalfocus]', this).focus();\n    }.bind(this), 100);\n  });\n});\n\n(function ($) {\n\n  $.fn.modalTabbing = function () {\n\n    var tabbing = function (jqSelector) {\n      var inputs = $(jqSelector).find('select, input, textarea, button, a[href]').filter(':visible').not(':disabled');\n\n      //Focus to first element in the container.\n      inputs.first().focus();\n\n      $(jqSelector).on('keydown', function (e) {\n        if (e.which === 9) {\n\n          var inputs = $(jqSelector).find('select, input, textarea, button, a[href]').filter(':visible').not(':disabled');\n\n          /*redirect last tab to first input*/\n          if (!e.shiftKey) {\n            if (inputs[inputs.length - 1] === e.target) {\n              e.preventDefault();\n              inputs.first().focus();\n            }\n          }\n          /*redirect first shift+tab to last input*/\n          else {\n            if (inputs[0] === e.target) {\n              e.preventDefault();\n              inputs.last().focus();\n            }\n          }\n        }\n      });\n    };\n\n    return this.each(function () {\n      tabbing(this);\n    });\n\n  };\n})(jQuery);\n"]}