$(document).ready(function(){function e(e,t,i){var a=[];if(i)for(t;t>=e;t--)1===t.toString().length?a.push("0"+t.toString()):a.push(t.toString());else for(e;e<=t;e++)1===e.toString().length?a.push("0"+e.toString()):a.push(e.toString());return a}function t(e,t){var a=t.closest(".card").find(".card-slide[aria-hidden=false]"),l=a.next(),o=a.prev(),n=t.closest(".card-animation-wrapper").outerHeight();a.hide(),a.attr("aria-hidden","true"),"next"===e?(l.show(),l.attr("aria-hidden","false")):"prev"===e&&(o.show(),o.attr("aria-hidden","false")),l.is(":last-of-type")&&$("html, body").animate({scrollTop:l.closest(".card").offset().top-15},300),i(t,n,e)}function i(e,t,i){TweenLite.set(e.closest(".card-animation-wrapper"),{height:"auto"}),TweenLite.from(e.closest(".card-animation-wrapper"),.5,{height:t,ease:Power2.easeOut,immediateRender:!1}),"next"===i?TweenLite.fromTo(e.closest(".card-body"),.5,{opacity:"0",transform:"translateY(-20px)"},{opacity:"1",transform:"translateY(0)"}):"prev"===i&&TweenLite.fromTo(e.closest(".card-body"),.5,{opacity:"0",transform:"translateY(20px)"},{opacity:"1",transform:"translateY(0)"})}$(".tooltip-aarp-card").tooltipster({content:$("#tooltip-aarp-card"),contentCloning:!0,contentAsHTML:!0,interactive:!0,trigger:"click",maxWidth:450}),$(".ask-question-message").length>0&&$(".ask-question-message textarea").keyup(function(e){var t=$(this).val().length,i=1e3-t;$(this).closest(".ask-question-message").find(".message-count").html(i)}),$("input[name=message-email-type]").change(function(e){$("#message-new-email").is(":checked")?$("#new-email-fields").removeClass("hidden"):$("#new-email-fields").addClass("hidden")}),$("#add-alt-email").click(function(e){e.preventDefault(),$(this).addClass("hidden"),$("#alt-email-wrapper").removeClass("hidden")}),$("#add-alt-phone").click(function(e){e.preventDefault(),$(this).addClass("hidden"),$("#alt-phone-wrapper").removeClass("hidden")}),$("#call-btn").click(function(e){e.preventDefault(),t("next",$(this))}),$("#call-cancel").click(function(e){e.preventDefault(),t("prev",$(this))}),$("#message-btn").click(function(e){e.preventDefault(),t("next",$(this))}),$("#message-cancel").click(function(e){e.preventDefault(),t("prev",$(this))}),$("#question-btn").click(function(e){e.preventDefault(),t("next",$(this))}),$("#question-cancel").click(function(e){e.preventDefault(),t("prev",$(this))}),$("#call-question-about").change(function(e){"Other"===$(this).val()?$("#call-more-info").closest(".field").removeClass("hidden"):$("#call-more-info").closest(".field").addClass("hidden")}),$("#call-form").validate({rules:{"call-number":"required","call-more-info":"required"},highlight:function(e){$(e).closest(".field").addClass("field-has-error")},unhighlight:function(e){$(e).closest(".field").removeClass("field-has-error")},errorPlacement:function(e,t){t.closest(".field").append(e)}}),$("#message-form").validate({rules:{"message-email":{required:!0,email:!0},"message-email-confirm":{required:!0,equalTo:"#message-email"}},highlight:function(e){$(e).closest(".field").addClass("field-has-error")},unhighlight:function(e){$(e).closest(".field").removeClass("field-has-error")},errorPlacement:function(e,t){t.closest(".field").append(e)}});$("#question-form").validate({rules:{"question-message":"required","question-member-number":"required","question-first-name":"required","question-last-name":"required","question-email":{required:!0,email:!0},"question-email-confirm":{required:!0,equalTo:"#question-email"},"dob-mm":{dob:!0,required:!0},"dob-dd":{dob:!0,required:!0},"dob-yyyy":{dob:!0,required:!0},"question-alt-email":{required:function(){return $("#question-alt-email-confirm").val().length>0||$("#question-alt-email").val().length>0},email:!0},"question-alt-email-confirm":{required:function(){return $("#question-alt-email-confirm").val().length>0||$("#question-alt-email").val().length>0},equalTo:"#question-alt-email"},"question-alt-phone":{required:function(){return $("#question-alt-phone-confirm").val().length>0||$("#question-alt-phone").val().length>0}},"question-alt-phone-confirm":{required:function(){return $("#question-alt-phone-confirm").val().length>0||$("#question-alt-phone").val().length>0},equalTo:"#question-alt-phone"}},groups:{dobGroup:"dob-mm dob-dd dob-yyyy"},showErrors:function(e,t){this.defaultShowErrors()},highlight:function(e){"question-alt-email-confirm"==$(e).prop("id")&&$(e).val().length>0&&$("#question-alt-email").closest(".field").addClass("field-has-error"),"question-alt-phone-confirm"==$(e).prop("id")&&$(e).val().length>0&&$("#question-alt-phone").closest(".field").addClass("field-has-error"),$(e).closest(".field--dob").length>0?$(e).closest(".field--dob").addClass("field-has-error"):$(e).closest(".field").addClass("field-has-error")},unhighlight:function(e){if("question-alt-email-confirm"==$(e).prop("id")&&$("#question-alt-email").parents(".field").removeClass("field-has-error"),"question-alt-email"==$(e).prop("id")&&$("#question-alt-email-confirm").val().length<=0&&($("#question-alt-email-confirm").closest(".field").removeClass("field-has-error"),$("#question-alt-email-confirm").closest(".field").find(".error").remove()),"question-alt-phone-confirm"==$(e).prop("id")&&$("#question-alt-phone").parents(".field").removeClass("field-has-error"),"question-alt-phone"==$(e).prop("id")&&$("#question-alt-phone-confirm").val().length<=0&&($("#question-alt-phone-confirm").closest(".field").removeClass("field-has-error"),$("#question-alt-phone-confirm").closest(".field").find(".error").remove()),$(e).closest(".field--dob").length>0){var t=!1;$(e).closest(".field--dob").find("select").each(function(e,i){""!==$(this).val()&&$(this).val()||(t=!0)}),t||$(e).closest(".field--dob").removeClass("field-has-error")}else $(e).closest(".field").removeClass("field-has-error")},invalidHandler:function(e,t){var i=t.numberOfInvalids();if(i){var a=1==i?"You missed 1 field. It has been highlighted":"You missed "+i+" fields. They have been highlighted";$("div.error span").html(a),$("div.error").show()}else $("div.error").hide()},errorPlacement:function(e,t){$(t).closest(".field--dob").length>0?t.closest(".field--dob").append(e):t.closest(".field").append(e)}});$.validator.addMethod("dob",function(e,t){var i=!1;return $(t).closest(".field--dob").find("select").each(function(e,t){""!==$(this).val()&&$(this).val()||(i=!0)}),!i},"Please complete all date fields."),$("#call-form").submit(function(e){e.preventDefault();var i=$("#call-form").valid();i&&t("next",$(this))}),$("#message-form").submit(function(e){e.preventDefault();var i=$("#message-form").valid(),a=$(this).find("input[type=radio]:checked").val();"message-old-email"===a?t("next",$(this)):i&&t("next",$(this))}),$("#question-submit").on("click",function(e){e.preventDefault();var i=$("#question-form").valid();i&&(t("next",$(this)),$("html, body").animate({scrollTop:$(this).closest(".card").offset().top-50},300))});var a=(document.getElementById("date-mm"),document.getElementById("date-dd"),document.getElementById("date-yyyy"),e(1,12)),l=e(1,31),o=e(1930,2017,!0);$("#date-mm").select2({data:a,placeholder:" "}),$("#date-dd").select2({data:l,placeholder:" "}),$("#date-yyyy").select2({data:o,placeholder:" "}),jQuery.extend(jQuery.validator.messages,{equalTo:"Enter a value that matches the value above."})});