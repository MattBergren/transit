function changeSlide(e){var t,a,r=$(".add-drug-animation-wrapper"),i=r.outerHeight(),n=$('.add-drug-slide[aria-hidden="false"]');$("#alt-search").hide(),$("#alt-search").attr("tabindex","-1"),"next"===e?(t=n.next(),a="-80px"):(t=n.prev(),a="80px"),t.length&&(n.hide().attr("aria-hidden","true").attr("tabindex","-1"),t.show().attr("aria-hidden","false").attr("tabindex","0").focus(),TweenLite.set(r,{height:"auto"}),TweenLite.from(r,.5,{height:i,ease:Power2.easeOut,immediateRender:!1}),TweenLite.fromTo(t,.5,{transform:"translateY("+a+")",opacity:"0",ease:Power2.easeOut},{transform:"translateY(0)",opacity:"1",ease:Power2.easeOut}))}function fadeContent(e,t,a){var r=$(".add-drug-animation-wrapper"),i=r.outerHeight();a.show().attr("aria-hidden","false").attr("tabindex","0"),e&&(TweenLite.set(r,{height:"auto"}),TweenLite.from(r,.5,{height:i,ease:Power2.easeOut,immediateRender:!1}),TweenLite.fromTo(a,.5,{opacity:0,ease:Power2.easeOut},{opacity:1,ease:Power2.easeOut}))}function resetModal(){$("#dosage-radios .radio-block:first-of-type input[type=radio]").prop("checked",!0),$("#quantity").val("30"),$("#drug-search-input").val(""),$('#generic-check input[value="original"]').prop("checked",!0);var e=$('.add-drug-slide[aria-hidden="false"]'),t=$(".add-drug .add-drug-slide:first-child");e.hide(),e.attr("aria-hidden","true"),t.attr("aria-hidden","false"),t.show(),$("#alt-search").hide(),$(".add-drug-slide").removeAttr("style")}function setTotalPrice(){function e(){totalCost.html(costNumber.cost.toFixed(2))}TweenLite.to(costNumber,1,{cost:1234.56,onUpdate:e}),$(".drug-tiers").html("XX.XX")}function validateDrugSearch(e){for(var t=drugList,a=0;a<t.length;a++)if(e===t[a])return!0}function setDrugValues(e){var t=$(".add-drug");"title"in e&&(t.find(".drug-name").html(e.title),t.find(".drug-name-generic").html("Acme Non-"+e.title)),"dosage"in e&&(t.find(".add-drug-slide:nth-child(3) .drug-name").append(" "+e.dosage+"mg"),t.find(".drug-name-generic").append(" "+e.dosage+"mg"))}function debounce(e,t,a){var r;return function(){var i=this,n=arguments,d=function(){r=null,a||e.apply(i,n)},l=a&&!r;clearTimeout(r),r=setTimeout(d,t),l&&e.apply(i,n)}}function btnSpacePress(e,t){32===t.keyCode&&(t.preventDefault(),$newDrug.title=e.innerHTML,setDrugValues($newDrug),changeSlide("next"),$("#drug-search-input").val($newDrug.title))}function btnClick(e,t){t.preventDefault(),$newDrug.title=e.innerHTML,setDrugValues($newDrug),changeSlide("next"),$("#drug-search-input").val($newDrug.title)}function openGenericModal(e,t){t.preventDefault();var a=$(e).closest(".drug-container").find(".subtitle").text();$("#genericModal").find(".drug-name").html(a),$("#genericModal").find(".generic-name").html("Acme Non-"+a),$("#genericModal").modal("show")}$(document).ready(function(){var e=($(".add-drug-slick"),document.getElementById("drug-search-input"));new Awesomplete(e,{list:drugList,minChars:4});e.addEventListener("awesomplete-selectcomplete",function(e){$newDrug.title=e.text.label,setDrugValues($newDrug),changeSlide("next")});$(".total-cost");$("#zipcode-button").click(function(e){e.preventDefault();var t=$("#zipcode").val();""!==t&&$.isNumeric(t)&&($(".mail-service-block").hide(),$(".pharmacy-standard-block").hide(),$(".pharmacy-saver-block").show(),$("#collapseMap").collapse("show"),$("#pharmacy-type input[value=saver]").attr("checked",!0),$(window).trigger("mapUpdate"))}),$("ul.arrow-tabs li a.arrow-tab-item").click(function(e){$("ul.arrow-tabs li a.arrow-tab-item").removeClass("active"),$(this).addClass("active")}),$("#drug-search-button").click(function(e){e.preventDefault();var t=$("#alt-search");t.hide(),t.attr("tabindex","0");var a=$("#drug-search-input").val(),r=$("#add-drug-search").valid();if(r)if(validateDrugSearch(a))$newDrug.title=a,setDrugValues($newDrug),changeSlide("next");else{var i=$("#drug-radios"),n=$("#lipitor-radios");a.toLowerCase().indexOf("drug")>=0?(n.addClass("hidden"),i.removeClass("hidden")):(i.addClass("hidden"),n.removeClass("hidden")),fadeContent(!0,$("#main-search"),t),t.focus()}}),$("#drug-dosage-button").click(function(e){e.preventDefault();var t=$("#dosage-radios input[type=radio]:checked").val(),a=$("#quantity").val(),r=$("#frequency").val(),i=($("#drug-search-input").val(),$("#add-drug-details").valid());i&&($newDrug.qty=a,$newDrug.freq=r,$newDrug.dosage=t,setDrugValues($newDrug),changeSlide("next"))}),$("#save-drug-button").click(function(e){e.preventDefault();var t=$("#dosage-radios input[type=radio]:checked").val(),a=$("#drug-search-input").val(),r=$("#generic-check input[type=radio]:checked").val(),i=a+" "+t+"mg",n="Acme Non-"+a+" "+t+"mg";"original"===r?($newDrug.title=i,$newDrug.generic=!0):($newDrug.title=n,$newDrug.generic=!1);var d=Math.random()>=.5;d?$newDrug.limits=!0:$newDrug.limits=!1,Store.push(["DCE","savedDrugs","drugs"],$newDrug),Store.set(["DCE","savedDrugs"],{noDrugs:!1}),void 0!==Store.ref(["DCE","savedPharmacy"]).data.name&&(Store.set(["DCE"],{savingsAvail:!0}),setTotalPrice()),d&&$(".tooltip-small").tooltipster({content:$("#tooltip-small"),contentCloning:!0,contentAsHTML:!0,interactive:!0,trigger:"click",maxWidth:250});var l=Store.ref(["DCE","savedDrugs","drugs"]).data.length;l>3&&$(".msg-more-drugs").html('<span class="italic">...and '+(l-3)+" other(s)</span>"),$(".match-height-drug").matchHeight({remove:!0}),$(".match-height-drug").matchHeight(),$("#drugModal").modal("hide"),$("html, body").animate({scrollTop:$("ul.arrow-tabs").offset().top},300)}),$("#drug-alt-back-button").click(function(e){e.preventDefault(),fadeContent(!0,$("#alt-search"),$("#main-search"))}),$("#add-drug").click(function(e){e.preventDefault(),$newDrug={},resetModal()}),$(".drug-back").click(function(e){e.preventDefault(),changeSlide("prev")}),$("#drugModal").on("hidden.bs.modal",function(e){$("#add-drug").focus()}),$("a.edit-drug-list").on("click",function(e){e.preventDefault(),$('a[data-toggle="tab"][href="#drugs-tab"]').trigger("click")}),$("a.edit-pharmacy").on("click",function(e){e.preventDefault(),$('a[data-toggle="tab"][href="#pharmacy-tab"]').trigger("click")}),$("#add-drug-search").validate({rules:{"drug-search-input":{required:!0,minlength:4},"alt-sug":"required"},highlight:function(e){$(e).closest(".field").length<1?$(e).closest(".field--inline").addClass("field-has-error"):$(e).closest(".field").addClass("field-has-error")},unhighlight:function(e){$(e).closest(".field").length<1?$(e).closest(".field--inline").removeClass("field-has-error"):$(e).closest(".field").removeClass("field-has-error")},errorPlacement:function(e,t){t.closest("#add-drug-search").find(".form-error-block").append(e)}}),$("#add-drug-details").validate({rules:{quantity:"required"},highlight:function(e){$(e).closest(".field--row-small").addClass("field-has-error")},unhighlight:function(e){$(e).closest(".field--row-small").removeClass("field-has-error")},errorPlacement:function(e,t){t.closest(".field--row-small").find(".table-body-cell:nth-of-type(2)").append(e)}})});var drugList=["Drug A","Drug B","Drug C","Drug D","Drug E","Drug F","Drug G","Drug H","Drug I"],$newDrug={};