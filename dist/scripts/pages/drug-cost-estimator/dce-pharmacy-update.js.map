{"version":3,"sources":["pages/drug-cost-estimator/dce-pharmacy-update.js"],"names":["$","document","ready","map","infoWindows","saverMarkers","saverLabels","saverWindows","saverWindowContents","standardMarkers","standardLabels","standardWindows","standardWindowContents","blueCircleImage","url","size","google","maps","Size","origin","Point","anchor","scaledSize","starCircleImage","bluePinImage","starPinImage","totalCost","costNumber","cost","$standardMarkersData","lat","lng","name","markerNumber","address1","address2","phone","distance","type","visible","i","length","Store","push","$saverMarkersData","savings","initMap","Map","getElementById","center","LatLng","zoom","scrollwheel","styles","featureType","elementType","stylers","visibility","saverMarkersData","countProperties","thisMarker","Marker","position","title","animation","Animation","DROP","icon","label","text","toString","color","index","MapLabel","fontSize","align","InfoWindow","content","addListener","closeWindows","collapseMarkerIcons","get","setIcon","open","panTo","standardMarkersData","event","addDomListener","window","mapCenter","getCenter","trigger","setCenter","one","e","setMarkers","centerMap","on","removeClass","addClass","animate","scrollTop","offset","top","$pharmacyFilters","switchVisbTile","val","filterPharmacyResults","pharmacyResults","resultIndex","arrMarkers","windowType","find","preventDefault","hasClass","isWindowOpen","undefined","$selectedPharm","ifSelected","closest","collapse","parents","selectPharmacy","click","savedPharmacy","set","savingsAvail","show","attr","pharmacySidebar","removeAllMarkers","html","hide","removeAttr","change","zipValue","windowWidth","width","collapseMapMobile","debounce","css","$index","match","$type","$visibTab","children","filter","obj","count","prop","hasOwnProperty","arr","context","setMap","close","removeOtherMarkers","markers","infoWindow","windowContent","getContent","regexSelect","regexStandard","regexPrice","test","concat","setContent","radioVal","saverBlock","standardBlock","mailBlock","retailBlock","collapseMap","mapToggle","setTotalPrice","TweenLite","to","onUpdate","showPrice","toFixed","bounds","LatLngBounds","extend","getPosition","fitBounds","getMap","$pharms","$starred","$markers","j","$this","$pharmacyType","$oldIndex","alert","$pharmacyCount","ref","data","$selected","replace","pharmacyName","func","wait","immediate","timeout","args","arguments","later","apply","callNow","clearTimeout","setTimeout"],"mappings":"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","file":"dce-pharmacy-update.js","sourcesContent":["$(document).ready(function() {\n    var map,\n        infoWindows = [],\n        saverMarkers = [],\n        saverLabels = [],\n        saverWindows = [],\n        saverWindowContents = [],\n        standardMarkers = [],\n        standardLabels = [],\n        standardWindows = [],\n        standardWindowContents = [],\n        blueCircleImage = {\n            url: '/images/icon-svgs/mapmarker-pill-blue.svg',\n            size: new google.maps.Size(40, 40),\n            origin: new google.maps.Point(0, 0),\n            anchor: new google.maps.Point(20, 20),\n            scaledSize: new google.maps.Size(40, 40)\n        },\n        starCircleImage = {\n            url: '/images/icon-svgs/mapmarker-pill-star.svg',\n            size: new google.maps.Size(40, 40),\n            origin: new google.maps.Point(0, 0),\n            anchor: new google.maps.Point(20, 20),\n            scaledSize: new google.maps.Size(40, 40)\n        },\n        bluePinImage = {\n            url: '/images/icon-svgs/mapmarker-pin-blue.svg',\n            size: new google.maps.Size(40, 40),\n            origin: new google.maps.Point(0, 0),\n            anchor: new google.maps.Point(20, 40),\n            scaledSize: new google.maps.Size(40, 40)\n        },\n        starPinImage = {\n            url: '/images/icon-svgs/mapmarker-pin-star.svg',\n            size: new google.maps.Size(40, 40),\n            origin: new google.maps.Point(0, 0),\n            anchor: new google.maps.Point(20, 40),\n            scaledSize: new google.maps.Size(40, 40)\n        };\n\n    // Cost spinner\n    var totalCost = $('.total-cost'),\n        costNumber = { cost: 0 };\n\n    // Marker data\n    var $standardMarkersData = [\n        {\n            lat: 44.976856,\n            lng: -93.271771,\n            name: 'Standard Pharmacy',\n            markerNumber: '0',\n            address1: '985 Universal Ave',\n            address2: 'Minneapolis, MN 55403',\n            phone: '(612) 555-5555',\n            distance: '0.76',\n            type: 'Standard Network',\n            visible: true\n        },\n        {\n            lat: 44.972161,\n            lng: -93.277306,\n            name: 'Hershey\\'s Pharmacy',\n            markerNumber: '1',\n            address1: '795 Chocolate Street',\n            address2: 'Minneapolis, MN 55403',\n            phone: '(612) 555-5555',\n            distance: '1.56',\n            type: 'Standard Network',\n            visible: true\n        }\n    ];\n\n    for (var i = 0; i < $standardMarkersData.length; i++) {\n        Store.push(['DCE', 'pharmacyStandard'], $standardMarkersData[i]);\n    }\n\n    var $saverMarkersData = [\n        {\n            lat: 44.981672,\n            lng: -93.283818,\n            name: 'CVS Pharmacy',\n            markerNumber: '0',\n            address1: '795 Oglethorpe Ave',\n            address2: 'Minneapolis, MN 55403',\n            phone: '(612) 555-5555',\n            cost: '1,000.00',\n            savings: '5.00',\n            distance: '0.81',\n            type: 'Pharmacy Saver',\n            visible: true\n        },\n        {\n            lat: 44.980445,\n            lng: -93.275313,\n            name: 'Bob\\'s Club Pharmacy',\n            markerNumber: '1',\n            address1: '347 Mirum Circle',\n            address2: 'Minneapolis, MN 55403',\n            phone: '(612) 555-5555',\n            cost: '950.00',\n            savings: '10.00',\n            distance: '0.93',\n            type: 'Pharmacy Saver',\n            visible: true\n        },\n        {\n            lat: 44.976645,\n            lng: -93.259813,\n            name: 'Walblues Pharmacy',\n            markerNumber: '2',\n            address1: '965 Snapple Drive',\n            address2: 'Minneapolis, MN 55403',\n            phone: '(612) 555-5555',\n            cost: '940.00',\n            savings: '20.00',\n            distance: '1.36',\n            type: 'Pharmacy Saver',\n            visible: true\n        },\n        {\n            lat: 44.975702,\n            lng: -93.273759,\n            name: 'UHCMR Pharmacy',\n            markerNumber: '3',\n            address1: '123 Health Street',\n            address2: 'Minneapolis, MN 55403',\n            phone: '(612) 555-5555',\n            cost: '935.00',\n            savings: '25.00',\n            distance: '1.72',\n            type: 'Pharmacy Saver',\n            visible: true\n        }\n    ];\n\n    for (var i = 0; i < $saverMarkersData.length; i++) {\n        Store.push(['DCE', 'pharmacySaver'], $saverMarkersData[i]);\n    }\n\n    // Initialize map\n    function initMap() {\n        map = new google.maps.Map(document.getElementById('map'), {\n            center: new google.maps.LatLng(44.979972, -93.277818),\n            zoom: 14,\n            scrollwheel: false,\n            styles: [\n                {\n                    featureType: 'administrative.land_parcel',\n                    elementType: 'labels',\n                    stylers: [\n                        {\n                            visibility: 'off'\n                        }\n                    ]\n                },\n                {\n                    featureType: 'poi.business',\n                    stylers: [\n                        {\n                            visibility: 'off'\n                        }\n                    ]\n                },\n                {\n                    featureType: 'poi.park',\n                    elementType: 'labels.text',\n                    stylers: [\n                        {\n                            visibility: 'off'\n                        }\n                    ]\n                },\n                {\n                    featureType: 'road.local',\n                    elementType: 'labels',\n                    stylers: [\n                        {\n                            visibility: 'off'\n                        }\n                    ]\n                }\n            ]\n        });\n\n        // Create markers\n        var saverMarkersData = {\n            '0': {\n                lat: 44.981672,\n                lng: -93.283818,\n                name: 'CVS Pharmacy',\n                markerNumber: '1'\n            },\n            '1': {\n                lat: 44.980445,\n                lng: -93.275313,\n                name: 'Bob\\'s Club Pharmacy',\n                markerNumber: '2'\n            },\n            '2': {\n                lat: 44.976645,\n                lng: -93.259813,\n                name: 'Walblues Pharmacy',\n                markerNumber: '3'\n            },\n            '3': {\n                lat: 44.975702,\n                lng: -93.273759,\n                name: 'UHCMR Pharmacy',\n                markerNumber: '4'\n            }\n        };\n\n        // Create saver markers\n        for (var i = 0; i < countProperties($saverMarkersData); i++) {\n            var thisMarker = $saverMarkersData[i];\n\n            // Create marker\n            saverMarkers[i] = new google.maps.Marker({\n                position: {\n                    lat: thisMarker.lat,\n                    lng: thisMarker.lng\n                },\n                title: thisMarker.name,\n                animation: google.maps.Animation.DROP,\n                icon: blueCircleImage,\n                label: {\n                    text: (i + 1).toString(),\n                    color: 'white'\n                }\n            });\n\n            saverMarkers[i].index = i; //add index property\n\n            // Create label\n            saverLabels[i] = new MapLabel({\n                text: thisMarker.name,\n                position: new google.maps.LatLng(thisMarker.lat, thisMarker.lng),\n                fontSize: 14,\n                align: 'bottom'\n            });\n\n            // Create info window\n            saverWindowContents[i] =\n                `\n        <p class=\"color-blue-base bold text-medium margin-extra-small\">${saverMarkers[i].title} - ${\n                    thisMarker.distance\n                } mi</p>\n        <p class=\"margin-none\">${thisMarker.address1}</p>\n        <p class=\"margin-none\">$${thisMarker.cost} total annual drug cost</p>\n        <a href=\"#\" class=\"map-select-` +\n                i +\n                `\">Select</a>\n      `;\n\n            saverWindows[i] = new google.maps.InfoWindow({\n                content: saverWindowContents[i]\n            });\n\n            // Add click listener\n            saverMarkers[i].addListener('click', function() {\n                // Close other windows\n                closeWindows(saverWindows);\n                collapseMarkerIcons(saverMarkers);\n\n                if (!saverMarkers[this.index].get('selected')) {\n                    saverMarkers[this.index].setIcon(bluePinImage);\n                } else {\n                    saverMarkers[this.index].setIcon(starPinImage);\n                }\n                saverWindows[this.index].open(map, saverMarkers[this.index]);\n                map.panTo(saverMarkers[this.index].position);\n            });\n\n            // On info window close\n            saverWindows[i].addListener('closeclick', function() {\n                collapseMarkerIcons(saverMarkers);\n            });\n        }\n\n        // Create standard markers\n        var standardMarkersData = {\n            '0': {\n                lat: 44.976856,\n                lng: -93.271771,\n                name: 'Standard Pharmacy',\n                markerNumber: '1'\n            },\n            '1': {\n                lat: 44.972161,\n                lng: -93.277306,\n                name: 'Hershey\\'s Pharmacy',\n                markerNumber: '2'\n            }\n        };\n\n        for (var i = 0; i < countProperties($standardMarkersData); i++) {\n            var thisMarker = $standardMarkersData[i];\n\n            // Create marker\n            standardMarkers[i] = new google.maps.Marker({\n                position: {\n                    lat: thisMarker.lat,\n                    lng: thisMarker.lng\n                },\n                title: thisMarker.name,\n                animation: google.maps.Animation.DROP,\n                icon: blueCircleImage,\n                label: {\n                    text: (i + 1).toString(),\n                    color: 'white'\n                }\n            });\n\n            standardMarkers[i].index = i; //add index property\n\n            // Create label\n            standardLabels[i] = new MapLabel({\n                text: thisMarker.name,\n                position: new google.maps.LatLng(thisMarker.lat, thisMarker.lng),\n                fontSize: 14,\n                align: 'bottom'\n            });\n\n            // Create info window\n            standardWindowContents[i] =\n                `\n        <p class=\"color-blue-base bold text-medium margin-extra-small\">${standardMarkers[i].title} - ${\n                    thisMarker.distance\n                } mi</p>\n        <p class=\"margin-none\">${thisMarker.address1}</p>\n        <a href=\"#\" class=\"map-select-` +\n                i +\n                `\">Select</a>\n      `;\n\n            standardWindows[i] = new google.maps.InfoWindow({\n                content: standardWindowContents[i]\n            });\n\n            // Add click listener\n            standardMarkers[i].addListener('click', function() {\n                // Close other windows\n                closeWindows(standardWindows);\n                collapseMarkerIcons(standardMarkers);\n\n                if (!standardMarkers[this.index].get('selected')) {\n                    standardMarkers[this.index].setIcon(bluePinImage);\n                } else {\n                    standardMarkers[this.index].setIcon(starPinImage);\n                }\n\n                standardWindows[this.index].open(map, standardMarkers[this.index]);\n                map.panTo(standardMarkers[this.index].position);\n            });\n\n            // On info window close\n            standardWindows[i].addListener('closeclick', function() {\n                collapseMarkerIcons(standardMarkers);\n            });\n        }\n\n        // Close info window on map click\n        map.addListener('click', function() {\n            closeWindows(saverWindows);\n            closeWindows(standardWindows);\n            collapseMarkerIcons(saverMarkers);\n            collapseMarkerIcons(standardMarkers);\n        });\n\n        google.maps.event.addDomListener(window, 'resize', function() {\n            var mapCenter = map.getCenter();\n            google.maps.event.trigger(map, 'resize');\n            map.setCenter(mapCenter);\n        });\n    }\n\n    // Tab pharmacy first click (initiate map)\n    $('li[href=\"#pharmacy-tab\"], a[data-toggle=\"tab\"][href=\"#pharmacy-tab\"]').one('shown.bs.tab', function(e) {\n        initMap();\n        setMarkers(saverMarkers, map);\n        centerMap(saverMarkers);\n        setMarkers(saverLabels, map);\n    });\n\n    // Refresh on resize\n    // google.maps.event.trigger(map, \"resize\");\n\n    // Tab clicked\n    $('a[data-toggle=\"tab\"][href=\"#drugs-tab\"]').on('show.bs.tab', function(e) {\n        $('ul.arrow-tabs li.arrow-tab-item').removeClass('active');\n        $('ul.arrow-tabs li.arrow-tab-item:first-child').addClass('active');\n        $('html, body').animate({ scrollTop: $('ul.arrow-tabs').offset().top }, 300);\n    });\n    $('a[data-toggle=\"tab\"][href=\"#pharmacy-tab\"]').on('show.bs.tab', function(e) {\n        $('ul.arrow-tabs li.arrow-tab-item').removeClass('active');\n        $('ul.arrow-tabs li.arrow-tab-item:nth-child(2)').addClass('active');\n        // $('html,body').scrollTop($('ul.arrow-tabs').offset().top);\n        $('html, body').animate({ scrollTop: $('ul.arrow-tabs').offset().top }, 300);\n    });\n    $('a[data-toggle=\"tab\"][href=\"#costs-tab\"]').on('show.bs.tab', function(e) {\n        $('ul.arrow-tabs li.arrow-tab-item').removeClass('active');\n        $('ul.arrow-tabs li.arrow-tab-item:nth-child(3)').addClass('active');\n        $('html, body').animate({ scrollTop: $('ul.arrow-tabs').offset().top }, 300);\n    });\n\n    // Pharmacy filter change\n    var $pharmacyFilters = $('input[name=\"pharmacy-type\"]');\n\n    $pharmacyFilters.on('change', function(e) {\n        switchVisbTile($(this).val());\n    });\n\n    filterPharmacyResults('saver');\n\n    function filterPharmacyResults(type) {\n        var pharmacyResults, resultIndex, arrMarkers, windowType;\n\n        if (type === 'saver') {\n            pharmacyResults = $('.pharmacy-saver-block').find('li');\n            arrMarkers = saverMarkers;\n            windowType = saverWindows;\n        } else if (type === 'standard') {\n            pharmacyResults = $('.pharmacy-standard-block').find('li');\n            arrMarkers = standardMarkers;\n            windowType = standardWindows;\n        }\n\n        pharmacyResults.on('mouseover', function(event) {\n            event.preventDefault();\n\n            if ($(this).hasClass('selected')) {\n                return;\n            }\n\n            // Check if any infowindows open\n            if (isWindowOpen(windowType)) {\n                return;\n            }\n\n            resultIndex = $(this).index();\n\n            // Expand marker\n            if (saverMarkers[resultIndex] !== undefined) {\n                arrMarkers[resultIndex].setIcon(bluePinImage);\n            }\n        });\n\n        pharmacyResults.on('mouseout', function(event) {\n            event.preventDefault();\n\n            if ($(this).hasClass('selected')) {\n                return;\n            }\n\n            // Check if any infowindows open\n            if (isWindowOpen(windowType)) {\n                return;\n            }\n\n            resultIndex = $(this).index();\n\n            // Collapse marker\n            if (saverMarkers[resultIndex] !== undefined) {\n                arrMarkers[resultIndex].setIcon(blueCircleImage);\n            }\n        });\n\n        $('a.show-on-map').on('click', function(e) {\n            e.preventDefault();\n\n            var $selectedPharm = ifSelected();\n\n            if ($selectedPharm === undefined) {\n                resultIndex = $(this)\n                    .closest('li')\n                    .index();\n            } else {\n                resultIndex = $selectedPharm;\n            }\n\n            // Close other windows and open current\n            google.maps.event.trigger(map, 'click');\n            google.maps.event.trigger(arrMarkers[resultIndex], 'click');\n            map.panTo(arrMarkers[resultIndex].position);\n\n            $('html, body').animate({ scrollTop: $('.map-toggle').offset().top }, 300);\n            $('#collapseMap').collapse('show');\n        });\n\n        $('a.select-pharmacy', pharmacyResults).on('click', function(e) {\n            e.preventDefault();\n\n            resultIndex = $(this)\n                .parents('li')\n                .index();\n\n            selectPharmacy($(this), resultIndex, type);\n        });\n    }\n\n    // Mail service selected\n    $('#mail-service-select').click(function(event) {\n        event.preventDefault();\n\n        let savedPharmacy = {\n            name: 'Preferred Mail Service',\n            address1: 'Delivered to your home',\n            address2: '',\n            phone: '',\n            type: 'Mail Service'\n        };\n\n        Store.set(['DCE', 'savedPharmacy'], savedPharmacy);\n\n        Store.set(['DCE', 'savedPharmacy'], { savingsAvail: false });\n\n        // if (Store.ref(['DCE', 'savedDrugs', 'drugs']).data.length > 0) {\n        //   Store.set(['DCE'], {savingsAvail: true});\n        // }\n\n        // $('#pharmacy-form').hide();\n        // $('#pharmacy-results').hide();\n        // $('.pharmacy-saver-block').hide();\n        // $('.pharmacy-standard-block').hide();\n        // $('.mail-service-block').hide();\n        $('#mail-service-select').addClass('select-pharmacy');\n        $('.selected-pharmacy').show();\n        $('.map-wrapper').attr('pharmacy-selected', 'true');\n        // Scroll to pharmacy header\n        $('html,body').scrollTop($('#pharmacy-header').offset().top);\n    });\n\n    // Search for a new pharmacy\n    $('.card-body').on('click', '.search-new-pharmacy', function(event) {\n        event.preventDefault();\n\n        google.maps.event.trigger(map, 'click');\n\n        var pharmacySidebar = `\n        <a href=\"#pharmacy-header\">Choose a Pharmacy to see your drug costs</a>\n    `;\n\n        // Remove markers from map\n        removeAllMarkers();\n\n        $('#pharmacy-sidebar').html(pharmacySidebar);\n\n        setMarkers(saverMarkers, map);\n        switchVisbTile('saver');\n        $('.selected-pharmacy').hide();\n        $('#pharmacy-form').show();\n        $('#pharmacy-results').show();\n        $('.pharmacy-saver-block').show();\n        $('#collapseMap').collapse('show');\n        $('.map-wrapper').removeAttr('pharmacy-selected');\n        $('#drug-pharmacy-sidebar-table').hide();\n    });\n\n    // Pharmacy Section\n    $('#pharmacy-type input[type=radio]').change(function(event) {\n        event.preventDefault();\n        switchVisbTile($(this).val());\n    });\n\n    // Zipcode button clicked\n    $('#zipcode-button').click(function(event) {\n        event.preventDefault();\n\n        var zipValue = $('#zipcode').val();\n\n        if (zipValue === '90210') {\n            $('.pharmacy-listing').show();\n            $('.pharmacy-error').hide();\n        } else {\n            $('.pharmacy-listing').hide();\n            $('.pharmacy-error').show();\n        }\n    });\n\n    // Collapse map on mobile screens\n    var windowWidth = $(window).width();\n\n    var collapseMapMobile = debounce(function() {\n        windowWidth = $(window).width();\n\n        if (windowWidth < 768) {\n            $('#collapseMap').collapse('hide');\n        }\n    }, 250);\n\n    if (windowWidth < 768) {\n        $('#collapseMap').collapse('hide');\n    }\n\n    // window.addEventListener('resize', collapseMapMobile);\n\n    // Refresh map on collapse open\n    $('#collapseMap').on('shown.bs.collapse', function() {\n        google.maps.event.trigger(map, 'resize');\n\n        if ($('.pharmacy-standard-block').css('display') === 'block') {\n            centerMap(standardMarkers);\n        } else if ($('.pharmacy-saver-block').css('display') === 'block') {\n            centerMap(saverMarkers);\n        }\n    });\n\n    // Map select link click\n    $('#map').on('click', '[class*=map-select]', function(event) {\n        event.preventDefault();\n\n        var $index = $(this)\n                .attr('class')\n                .match(/\\d+/)[0],\n            $type;\n\n        var $visibTab = $('#pharmacy-results')\n            .children()\n            .filter(':visible')\n            .attr('class');\n\n        switch ($visibTab) {\n            case 'pharmacy-standard-block':\n                $type = 'standard';\n                break;\n            case 'pharmacy-saver-block':\n                $type = 'saver';\n                break;\n        }\n\n        selectPharmacy($(this), $index, $type);\n    });\n\n    //---------------------------------------------------------------------------\n    // Functions\n    //---------------------------------------------------------------------------\n\n    // Count number of items in object\n    function countProperties(obj) {\n        var count = 0;\n\n        for (var prop in obj) {\n            if (obj.hasOwnProperty(prop)) ++count;\n        }\n\n        return count;\n    }\n\n    // Set map markers\n    function setMarkers(arr, context) {\n        for (var i = 0; i < arr.length; i++) {\n            // Check if marker selected\n            if (!arr[i].get('selected')) {\n                arr[i].setMap(context);\n            } else {\n                arr[i].setMap(context);\n                arr[i].setIcon(starCircleImage);\n            }\n        }\n    }\n\n    // Close all info windows\n    function closeWindows(arr) {\n        for (var i = 0; i < arr.length; i++) {\n            arr[i].close();\n        }\n    }\n\n    // Collapse all marker icons\n    function collapseMarkerIcons(arr) {\n        for (var i = 0; i < arr.length; i++) {\n            // Check if marker selected\n            if (!arr[i].get('selected')) {\n                arr[i].setIcon(blueCircleImage);\n\n                // add number back in\n                arr[i].set('label', { text: i + 1, color: 'white' });\n            } else {\n                arr[i].setIcon(starCircleImage);\n            }\n        }\n    }\n\n    // Remove other markers\n    function removeOtherMarkers(index, markers, infoWindow) {\n        for (var i = 0; i < markers.length; i++) {\n            if (i !== index) {\n                markers[i].setMap(null);\n\n                // Remove selected attribute\n                markers[i].set('selected', false);\n\n                // Add content back into info window\n                if (infoWindow !== undefined) {\n                    let windowContent = infoWindow[i].getContent(),\n                        regexSelect = /(?=Select)\\w+/g,\n                        regexStandard = /(Standard)+/g,\n                        regexPrice = /(\\$1234\\.56)+/g;\n\n                    // Price\n                    if (!regexPrice.test(windowContent) && !regexStandard.test(windowContent)) {\n                        windowContent = windowContent.concat(\n                            '<p class=\"margin-none\">$1234.56 total annual drug cost</p>'\n                        );\n                        infoWindow[i].setContent(windowContent);\n                    }\n\n                    // select\n                    if (!regexSelect.test(windowContent)) {\n                        windowContent = windowContent.concat('<a href=\"#\">Select</a>');\n                        infoWindow[i].setContent(windowContent);\n                    }\n                }\n            }\n        }\n    }\n\n    // Remove all markers\n    function removeAllMarkers() {\n        for (var i = 0; i < saverMarkers.length; i++) {\n            if (!saverMarkers[i].get('selected')) {\n                saverMarkers[i].setMap(null);\n                saverMarkers[i].setIcon(blueCircleImage);\n            }\n        }\n        for (var i = 0; i < standardMarkers.length; i++) {\n            if (!standardMarkers[i].get('selected')) {\n                standardMarkers[i].setMap(null);\n                standardMarkers[i].setIcon(blueCircleImage);\n            }\n        }\n    }\n\n    // Switch visible tile\n    function switchVisbTile(val) {\n        var radioVal = val,\n            saverBlock = $('.pharmacy-saver-block'),\n            standardBlock = $('.pharmacy-standard-block'),\n            mailBlock = $('.mail-service-block'),\n            retailBlock = $('.pharmacy-retail-block'),\n            collapseMap = $('#collapseMap'),\n            mapToggle = $('.map-toggle');\n\n        if (radioVal === 'saver') {\n            // Hide other blocks\n            mailBlock.hide();\n            standardBlock.hide();\n            retailBlock.hide();\n            removeAllMarkers();\n            setMarkers(saverMarkers, map);\n            filterPharmacyResults(radioVal);\n            centerMap(saverMarkers);\n            // Show\n            saverBlock.show();\n            collapseMap.collapse('show');\n            mapToggle.show();\n        } else if (radioVal === 'mail-service') {\n            // Hide other blocks\n            saverBlock.hide();\n            standardBlock.hide();\n            retailBlock.hide();\n            removeAllMarkers();\n            // Show\n            mailBlock.show();\n            collapseMap.collapse('hide');\n            mapToggle.hide();\n        } else if (radioVal === 'standard') {\n            // Hide other blocks\n            mailBlock.hide();\n            saverBlock.hide();\n            retailBlock.hide();\n            removeAllMarkers();\n            setMarkers(standardMarkers, map);\n            filterPharmacyResults(radioVal);\n            centerMap(standardMarkers);\n            // Show\n            standardBlock.show();\n            collapseMap.collapse('show');\n            mapToggle.show();\n        } else if (radioVal === 'retail') {\n            // Hide other blocks\n            mailBlock.hide();\n            saverBlock.hide();\n            removeAllMarkers();\n            setMarkers(standardMarkers, map);\n            filterPharmacyResults('standard');\n            centerMap(standardMarkers);\n            // Show\n            standardBlock.show();\n            retailBlock.show();\n            collapseMap.collapse('show');\n            mapToggle.show();\n        }\n    }\n\n    // Set total price\n    function setTotalPrice() {\n        TweenLite.to(costNumber, 1, { cost: 1234.56, onUpdate: showPrice });\n\n        function showPrice() {\n            totalCost.html(costNumber.cost.toFixed(2));\n        }\n\n        $('.drug-tiers').html('12.34');\n    }\n\n    // Center map on bounds\n    function centerMap(arr) {\n        var bounds = new google.maps.LatLngBounds();\n\n        for (var i = 0; i < arr.length; i++) {\n            bounds.extend(arr[i].getPosition());\n        }\n\n        map.fitBounds(bounds);\n    }\n\n    function isWindowOpen(arr) {\n        for (var i = 0; i < arr.length; i++) {\n            if (arr[i].getMap()) {\n                return true;\n            }\n        }\n    }\n\n    // Check if any pharms selected\n    function ifSelected() {\n        var $pharms = [saverMarkers, standardMarkers],\n            $starred;\n\n        for (var i = 0; $pharms.length > i; i++) {\n            var $markers = $pharms[i];\n\n            for (var j = 0; $markers.length > j; j++) {\n                if ($markers[j].get('selected')) {\n                    $starred = j;\n                }\n            }\n        }\n\n        return $starred;\n    }\n\n    // Select pharmacy\n    function selectPharmacy($this, $index, $type) {\n        // Check if saver or standard\n        var $visibTab = $('#pharmacy-results')\n                .children()\n                .filter(':visible')\n                .attr('class'),\n            $markers,\n            $pharmacyType,\n            $oldIndex,\n            pharmacyResults,\n            arrMarkers,\n            windowType;\n\n        if ($type === 'saver') {\n            pharmacyResults = $('.pharmacy-saver-block').find('li');\n            arrMarkers = saverMarkers;\n            windowType = saverWindows;\n        } else if ($type === 'standard') {\n            pharmacyResults = $('.pharmacy-standard-block').find('li');\n            arrMarkers = standardMarkers;\n            windowType = standardWindows;\n        }\n\n        switch ($visibTab) {\n            case 'pharmacy-standard-block':\n                $markers = $standardMarkersData;\n                $pharmacyType = 'pharmacyStandard';\n                break;\n            case 'pharmacy-saver-block':\n                $markers = $saverMarkersData;\n                $pharmacyType = 'pharmacySaver';\n                break;\n            case 'mail-service-block':\n                alert('mail');\n                break;\n        }\n\n        // Show pharmacies\n        var $pharmacyCount = Store.ref(['DCE', $pharmacyType]).data.length;\n\n        for (var i = 0; i < $pharmacyCount; i++) {\n            Store.set(['DCE', $pharmacyType, i], { visible: true });\n        }\n\n        Store.set(['DCE', $pharmacyType, $index], { visible: false });\n\n        // Remove all other selected pharmacies\n        var $selected = pharmacyResults.find('.selected');\n        $selected.removeClass('selected');\n\n        collapseMarkerIcons(arrMarkers);\n\n        // If drugs added set total price\n        if ($('#drugs-tab .drug-container').length !== 0) {\n            setTotalPrice();\n        }\n\n        // Remove markers from map\n        // removeOtherMarkers(resultIndex, arrMarkers, windowType);\n\n        google.maps.event.trigger(arrMarkers[$index], 'click');\n        map.panTo(arrMarkers[$index].position);\n\n        // Reset markers\n        for (var i = 0; i < standardMarkers.length; i++) {\n            standardMarkers[i].setIcon(blueCircleImage);\n            standardMarkers[i].set('selected', false);\n            standardMarkers[i].set('label', { text: i + 1, color: 'white' });\n        }\n        for (var i = 0; i < saverMarkers.length; i++) {\n            saverMarkers[i].setIcon(blueCircleImage);\n            saverMarkers[i].set('selected', false);\n            saverMarkers[i].set('label', { text: i + 1, color: 'white' });\n        }\n\n        // Set star marker\n        arrMarkers[$index].setIcon(starPinImage);\n        arrMarkers[$index].set('selected', true);\n\n        // Remove select link from info window\n        var windowContent = windowType[$index].getContent(),\n            regexSelect = /(?=Select)\\w+/g,\n            regexPrice = /(\\$1234\\.56)+/g;\n\n        if (regexSelect.test(windowContent)) {\n            windowContent = windowContent.replace('<a href=\"#\">Select</a>', '');\n            windowType[$index].setContent(windowContent);\n        }\n        if (regexPrice.test(windowContent)) {\n            windowContent = windowContent.replace('<p class=\"margin-none\">$1234.56 total annual drug cost</p>', '');\n            windowType[$index].setContent(windowContent);\n        }\n\n        // Remove number label\n        arrMarkers[$index].set('label', { text: ' ', color: 'white' });\n\n        // Add pharmacy\n        var pharmacyName = $this\n            .parents('li')\n            .find('.pharmacy-name')\n            .text();\n\n        Store.set(['DCE', 'savedPharmacy'], $markers[$index]);\n\n        Store.set(['DCE', 'savedPharmacy'], { savingsAvail: true });\n\n        if (Store.ref(['DCE', 'savedDrugs', 'drugs']).data.length > 0) {\n            Store.set(['DCE'], { savingsAvail: true });\n        }\n\n        $('.selected-pharmacy').show();\n        $('.map-wrapper').attr('pharmacy-selected', 'true');\n        // Scroll to pharmacy header\n        $('html,body').animate({ scrollTop: $('ul.map-toggle').offset().top });\n    }\n\n    // Returns a function, that, as long as it continues to be invoked, will not\n    // be triggered. The function will be called after it stops being called for\n    // N milliseconds. If `immediate` is passed, trigger the function on the\n    // leading edge, instead of the trailing.\n    function debounce(func, wait, immediate) {\n        var timeout;\n        return function() {\n            var context = this,\n                args = arguments;\n            var later = function() {\n                timeout = null;\n                if (!immediate) func.apply(context, args);\n            };\n            var callNow = immediate && !timeout;\n            clearTimeout(timeout);\n            timeout = setTimeout(later, wait);\n            if (callNow) func.apply(context, args);\n        };\n    }\n});\n"]}