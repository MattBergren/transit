{"version":3,"sources":["pages/payments.js"],"names":["$","on","toggleClass","event","preventDefault","addClass","prop","removeClass","change","hasClass","inputVal","val","creditCollapse","checkCollapse","isHidden","collapse","e","text","confirmLegal","path","agreed","length","checkParent","parents","window","location","href","validate","rules","required","equalTo","highlight","element","closest","unhighlight","errorPlacement","error","find","append","$formValid","valid","submit","click","validator","addMethod","value","$radio"],"mappings":";AACAA,EAAE,gCAAF,EAAoCC,EAApC,CAAuC,OAAvC,EAAgD,YAAW;AACzDD,IAAE,IAAF,EAAQE,WAAR,CAAoB,QAApB;AACD,CAFD;;AAIAF,EAAE,qBAAF,EAAyBC,EAAzB,CAA4B,OAA5B,EAAqC,UAASE,KAAT,EAAgB;AACnDA,QAAMC,cAAN;AACAJ,IAAE,IAAF,EAAQK,QAAR,CAAiB,QAAjB;AACAL,IAAE,2BAAF,EAA+BM,IAA/B,CAAoC,SAApC,EAA+C,KAA/C;AACAN,IAAE,iBAAF,EAAqBO,WAArB,CAAiC,QAAjC;AACD,CALD;;AAOAP,EAAE,oCAAF,EAAwCQ,MAAxC,CAA+C,UAASL,KAAT,EAAgB;AAC3D,MAAI,CAACH,EAAE,iBAAF,EAAqBS,QAArB,CAA8B,QAA9B,CAAL,EAA8C;AAC1CT,MAAE,iBAAF,EAAqBK,QAArB,CAA8B,QAA9B;AACAL,MAAE,qBAAF,EAAyBO,WAAzB,CAAqC,QAArC;AACH;AACJ,CALD;;AAOAP,EAAE,0BAAF,EAA8BQ,MAA9B,CAAqC,UAASL,KAAT,EAAgB;AACrD;AACA,MAAIO,WAAWV,EAAE,IAAF,EAAQW,GAAR,EAAf;AAAA,MACIC,iBAAiBZ,EAAE,0BAAF,CADrB;AAAA,MAEIa,gBAAgBb,EAAE,yBAAF,CAFpB;AAAA,MAGIc,WAAW,IAHf;;AAKA,MAAIJ,aAAa,QAAjB,EAA2B;AACzB;AACA,QAAIG,cAAcJ,QAAd,CAAuB,IAAvB,CAAJ,EAAkC;AAChCI,oBAAcE,QAAd,CAAuB,MAAvB;AACA;AACAF,oBAAcZ,EAAd,CAAiB,oBAAjB,EAAuC,YAAW;AAChDW,uBAAeG,QAAf,CAAwB,MAAxB;AACD,OAFD;AAGD,KAND,MAMO;AACLH,qBAAeG,QAAf,CAAwB,MAAxB;AACD;AACF,GAXD,MAWO;AACL;AACA,QAAIH,eAAeH,QAAf,CAAwB,IAAxB,CAAJ,EAAmC;AACjCG,qBAAeG,QAAf,CAAwB,MAAxB;AACA;AACAH,qBAAeX,EAAf,CAAkB,oBAAlB,EAAwC,YAAW;AACjDY,sBAAcE,QAAd,CAAuB,MAAvB;AACD,OAFD;AAGD,KAND,MAMO;AACLF,oBAAcE,QAAd,CAAuB,MAAvB;AACD;AACF;AACA,CA9BD;;AAgCAf,EAAE,8BAAF,EAAkCC,EAAlC,CAAqC,OAArC,EAA8C,UAASe,CAAT,EAAY;AACtDA,IAAEZ,cAAF;AACAJ,IAAE,6BAAF,EAAiCO,WAAjC,CAA6C,QAA7C;AACAP,IAAE,6BAAF,EAAiCiB,IAAjC,CAAsC,2BAAtC;AACH,CAJD;;AAMAjB,EAAE,mCAAF,EAAuCC,EAAvC,CAA0C,OAA1C,EAAmD,UAASe,CAAT,EAAY;AAC3DA,IAAEZ,cAAF;AACAJ,IAAE,6BAAF,EAAiCO,WAAjC,CAA6C,QAA7C;AACAP,IAAE,6BAAF,EAAiCiB,IAAjC,CAAsC,2BAAtC;AACH,CAJD;;AAMA,SAASC,YAAT,CAAsBF,CAAtB,EAAyBG,IAAzB,EAA+B;AAC3BH,IAAEZ,cAAF;AACA,MAAIgB,SAASpB,EAAE,qBAAF,EAAyBqB,MAAzB,GAAkC,CAA/C;AACA,MAAIC,cAActB,EAAE,aAAF,EAAiBuB,OAAjB,CAAyB,oBAAzB,EAA+C,CAA/C,CAAlB;AACAvB,IAAEsB,WAAF,EAAef,WAAf,CAA2B,WAA3B;AACA,MAAI,CAACa,MAAL,EAAa;AACTpB,MAAEsB,WAAF,EAAejB,QAAf,CAAwB,WAAxB;AACH,GAFD,MAEO;AACHmB,WAAOC,QAAP,CAAgBC,IAAhB,GAAuBP,IAAvB;AACH;AACJ;;AAED;AACAnB,EAAE,gBAAF,EAAoB2B,QAApB,CAA6B;AAC3BC,SAAO;AACL,2BAAuB,EAAC,gBAAgB,IAAjB,EADlB;AAEL,6BAAyB,UAFpB;AAGL,qCAAiC,EAACC,UAAU,IAAX,EAAiBC,SAAS,wBAA1B,EAH5B;AAIL,oCAAgC,UAJ3B;AAKL,4CAAwC,EAACD,UAAU,IAAX,EAAiBC,SAAS,wBAA1B,EALnC;AAML,gCAA4B,UANvB;AAOL,+BAA2B,UAPtB;AAQL,iCAA6B;AARxB,GADoB;AAW3BC,aAAW,mBAASC,OAAT,EAAkB;AAC3BhC,MAAEgC,OAAF,EAAWC,OAAX,CAAmB,aAAnB,EAAkC5B,QAAlC,CAA2C,iBAA3C;AACD,GAb0B;AAc3B6B,eAAa,qBAASF,OAAT,EAAkB;AAC7BhC,MAAEgC,OAAF,EAAWC,OAAX,CAAmB,aAAnB,EAAkC1B,WAAlC,CAA8C,iBAA9C;AACD,GAhB0B;AAiB3B4B,kBAAgB,wBAASC,KAAT,EAAgBJ,OAAhB,EAAyB;AACvC,QAAIA,QAAQC,OAAR,CAAgB,aAAhB,EAA+BI,IAA/B,CAAoC,iCAApC,EAAuEhB,MAAvE,GAAgF,CAApF,EAAuF;AACrFW,cAAQC,OAAR,CAAgB,aAAhB,EAA+BI,IAA/B,CAAoC,iCAApC,EAAuEC,MAAvE,CAA8EF,KAA9E;AACD,KAFD,MAEO;AACLJ,cAAQC,OAAR,CAAgB,aAAhB,EAA+BI,IAA/B,CAAoC,cAApC,EAAoDC,MAApD,CAA2DF,KAA3D;AACD;AACF;AAvB0B,CAA7B;;AA0BApC,EAAE,aAAF,EAAiB2B,QAAjB,CAA0B;AACxBC,SAAO;AACL,kBAAc;AADT,GADiB;AAIxBG,aAAW,mBAASC,OAAT,EAAkB;AAC3BhC,MAAEgC,OAAF,EAAWC,OAAX,CAAmB,QAAnB,EAA6B5B,QAA7B,CAAsC,iBAAtC;AACD,GANuB;AAOxB6B,eAAa,qBAASF,OAAT,EAAkB;AAC7BhC,MAAEgC,OAAF,EAAWC,OAAX,CAAmB,QAAnB,EAA6B1B,WAA7B,CAAyC,iBAAzC;AACD,GATuB;AAUxB4B,kBAAgB,wBAASC,KAAT,EAAgBJ,OAAhB,EAAyB;AACvChC,MAAEgC,OAAF,EAAWC,OAAX,CAAmB,QAAnB,EAA6BI,IAA7B,CAAkC,qBAAlC,EAAyDC,MAAzD,CAAgEF,KAAhE;AACD;AAZuB,CAA1B;;AAeApC,EAAE,cAAF,EAAkB2B,QAAlB,CAA2B;AACzBC,SAAO;AACL,2BAAuB;AADlB,GADkB;AAIzBG,aAAW,mBAASC,OAAT,EAAkB;AAC3BhC,MAAEgC,OAAF,EAAWC,OAAX,CAAmB,aAAnB,EAAkC5B,QAAlC,CAA2C,iBAA3C;AACD,GANwB;AAOzB6B,eAAa,qBAASF,OAAT,EAAkB;AAC7BhC,MAAEgC,OAAF,EAAWC,OAAX,CAAmB,aAAnB,EAAkC1B,WAAlC,CAA8C,iBAA9C;AACD,GATwB;AAUzB4B,kBAAgB,wBAASC,KAAT,EAAgBJ,OAAhB,EAAyB;AACvChC,MAAEgC,OAAF,EAAWC,OAAX,CAAmB,aAAnB,EAAkCI,IAAlC,CAAuC,cAAvC,EAAuDC,MAAvD,CAA8DF,KAA9D;AACD;AAZwB,CAA3B;;AAeApC,EAAE,eAAF,EAAmB2B,QAAnB,CAA4B;AAC1BC,SAAO;AACL,2BAAuB;AADlB,GADmB;AAI1BG,aAAW,mBAASC,OAAT,EAAkB;AAC3BhC,MAAEgC,OAAF,EAAWC,OAAX,CAAmB,aAAnB,EAAkC5B,QAAlC,CAA2C,iBAA3C;AACD,GANyB;AAO1B6B,eAAa,qBAASF,OAAT,EAAkB;AAC7BhC,MAAEgC,OAAF,EAAWC,OAAX,CAAmB,aAAnB,EAAkC1B,WAAlC,CAA8C,iBAA9C;AACD,GATyB;AAU1B4B,kBAAgB,wBAASC,KAAT,EAAgBJ,OAAhB,EAAyB;AACvChC,MAAEgC,OAAF,EAAWC,OAAX,CAAmB,aAAnB,EAAkCI,IAAlC,CAAuC,cAAvC,EAAuDC,MAAvD,CAA8DF,KAA9D;AACD;AAZyB,CAA5B;;AAeA;AACApC,EAAE,iBAAF,EAAqBC,EAArB,CAAwB,OAAxB,EAAiC,UAASE,KAAT,EAAgB;AAC/CA,QAAMC,cAAN;AACA,MAAImC,aAAavC,EAAE,gBAAF,EAAoBwC,KAApB,EAAjB;;AAEAxC,IAAE,gBAAF,EAAoByC,MAApB;AACD,CALD;;AAOA;AACAzC,EAAE,iBAAF,EAAqB0C,KAArB,CAA2B,UAASvC,KAAT,EAAgB;AACzC,MAAIoC,aAAavC,EAAE,aAAF,EAAiBwC,KAAjB,EAAjB;;AAEA,MAAI,CAACD,UAAL,EAAiB;AACfpC,UAAMC,cAAN;AACD;AACF,CAND;;AAQAJ,EAAE2C,SAAF,CAAYC,SAAZ,CAAsB,cAAtB,EAAsC,UAASC,KAAT,EAAgBb,OAAhB,EAAyB;AAC7D,MAAIQ,QAAQ,IAAZ;AACA,MAAIM,SAAS9C,EAAEgC,OAAF,EAAWT,OAAX,CAAmB,aAAnB,EAAkCc,IAAlC,CAAuC,qBAAvC,CAAb;;AAEA,MAAIS,OAAOxC,IAAP,CAAY,SAAZ,CAAJ,EAA4B;AAC1B,QAAIN,EAAEgC,OAAF,EAAWrB,GAAX,OAAqB,EAAzB,EAA6B;AAC3B6B,cAAQ,KAAR;AACD;AACF;;AAED,MAAIA,KAAJ,EAAW;AACT,WAAO,IAAP;AACD,GAFD,MAEO;AACL,WAAO,KAAP;AACD;AACF,CAfD,EAeG,yBAfH","file":"payments.js","sourcesContent":["\n$('.payment-form .collapse-toggle').on('click', function() {\n  $(this).toggleClass('hidden')\n})\n\n$('#showCreditCardForm').on('click', function(event) {\n  event.preventDefault()\n  $(this).addClass('hidden')\n  $('#savedCardRadios :checked').prop('checked', false);\n  $('#creditCardForm').removeClass('hidden')\n})\n\n$('#savedCardRadios input[type=radio]').change(function(event) {\n    if (!$('#creditCardForm').hasClass('hidden')) {\n        $('#creditCardForm').addClass('hidden')\n        $('#showCreditCardForm').removeClass('hidden');\n    }\n})\n\n$('#payment-type-form input').change(function(event) {\n/* Act on the event */\nvar inputVal = $(this).val(),\n    creditCollapse = $('.collapse#collapseCredit'),\n    checkCollapse = $('.collapse#collapseCheck'),\n    isHidden = true;\n\nif (inputVal === 'credit') {\n  // If check showing\n  if (checkCollapse.hasClass('in')) {\n    checkCollapse.collapse('hide');\n    // After hidden\n    checkCollapse.on('hidden.bs.collapse', function() {\n      creditCollapse.collapse('show');\n    });\n  } else {\n    creditCollapse.collapse('show');\n  }\n} else {\n  // If credit showing\n  if (creditCollapse.hasClass('in')) {\n    creditCollapse.collapse('hide');\n    // After hidden\n    creditCollapse.on('hidden.bs.collapse', function() {\n      checkCollapse.collapse('show');\n    });\n  } else {\n    checkCollapse.collapse('show');\n  }\n}\n});\n\n$('#cancelExistingAutoPayButton').on('click', function(e) {\n    e.preventDefault()\n    $('#cancellingAutomaticPayment').removeClass('hidden')\n    $('#editAutomaticPaymentButton').text('Set Up Automatic Payments')\n})\n\n$('#cancelExistingRecurringPayButton').on('click', function(e) {\n    e.preventDefault()\n    $('#cancellingRecurringPayment').removeClass('hidden')\n    $('#editRecurringPaymentButton').text('Set Up Recurring Payments')\n})\n\nfunction confirmLegal(e, path) {\n    e.preventDefault()\n    var agreed = $('#termsAgree:checked').length > 0;\n    let checkParent = $('#termsAgree').parents('#termsAgreeWrapper')[0]\n    $(checkParent).removeClass('has-error')\n    if (!agreed) {\n        $(checkParent).addClass('has-error')\n    } else {\n        window.location.href = path;\n    }\n}\n\n// Validation\n$('#auto-payments').validate({\n  rules: {\n    'other-amount-number': {'other-amount': true},\n    'auto-payments-routing': 'required',\n    'auto-payments-routing-confirm': {required: true, equalTo: '#auto-payments-routing'},\n    'auto-payments-account-number': 'required',\n    'auto-payments-account-number-confirm': {required: true, equalTo: '#auto-payments-routing'},\n    'auto-payments-first-name': 'required',\n    'auto-payments-last-name': 'required',\n    'auto-payments-sig-consent': 'required'\n  },\n  highlight: function(element) {\n    $(element).closest('.field--row').addClass('field-has-error');\n  },\n  unhighlight: function(element) {\n    $(element).closest('.field--row').removeClass('field-has-error');\n  },\n  errorPlacement: function(error, element) {\n    if (element.closest('.field--row').find('.table-body-cell:nth-of-type(2)').length > 0) {\n      element.closest('.field--row').find('.table-body-cell:nth-of-type(2)').append(error);\n    } else {\n      element.closest('.field--row').find('.field-input').append(error);\n    }\n  }\n});\n\n$('#terms-only').validate({\n  rules: {\n    'termsAgree': 'required'\n  },\n  highlight: function(element) {\n    $(element).closest('.field').addClass('field-has-error');\n  },\n  unhighlight: function(element) {\n    $(element).closest('.field').removeClass('field-has-error');\n  },\n  errorPlacement: function(error, element) {\n    $(element).closest('.field').find('.field-input--radio').append(error);\n  }\n});\n\n$('#amount-paid').validate({\n  rules: {\n    'other-amount-number': 'required'\n  },\n  highlight: function(element) {\n    $(element).closest('.field--row').addClass('field-has-error');\n  },\n  unhighlight: function(element) {\n    $(element).closest('.field--row').removeClass('field-has-error');\n  },\n  errorPlacement: function(error, element) {\n    $(element).closest('.field--row').find('.field-input').append(error);\n  }\n});\n\n$('#payment-form').validate({\n  rules: {\n    'other-amount-number': 'required'\n  },\n  highlight: function(element) {\n    $(element).closest('.field--row').addClass('field-has-error');\n  },\n  unhighlight: function(element) {\n    $(element).closest('.field--row').removeClass('field-has-error');\n  },\n  errorPlacement: function(error, element) {\n    $(element).closest('.field--row').find('.field-input').append(error);\n  }\n});\n\n// Call submit\n$('.submit-payment').on('click', function(event) {\n  event.preventDefault();\n  var $formValid = $('#auto-payments').valid();\n\n  $('#auto-payments').submit();\n});\n\n// Payment Submit\n$('#terms-only-btn').click(function(event) {\n  var $formValid = $('#terms-only').valid();\n\n  if (!$formValid) {\n    event.preventDefault();\n  }\n});\n\n$.validator.addMethod('other-amount', function(value, element) {\n  var valid = true;\n  var $radio = $(element).parents('.field--row').find('input[type=\"radio\"]');\n\n  if ($radio.prop('checked')) {\n    if ($(element).val() === '') {\n      valid = false;\n    }\n  }\n\n  if (valid) {\n    return true;\n  } else {\n    return false;\n  }\n}, 'This field is required.');\n"]}