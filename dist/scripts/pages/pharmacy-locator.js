$(document).ready(function(){function e(){c=new google.maps.Map(document.getElementById("map"),{center:new google.maps.LatLng(44.979972,(-93.277818)),zoom:14,scrollwheel:!1,styles:[{featureType:"administrative.land_parcel",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi.business",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"road.local",elementType:"labels",stylers:[{visibility:"off"}]}]});for(var e=0;e<p.length;e++){var t=p[e];d[e]=new google.maps.Marker({position:{lat:t.lat,lng:t.lng},title:t.name,animation:google.maps.Animation.DROP,label:{text:(e+1).toString(),color:"white"}}),"saver"===t.type?d[e].setIcon(y):d[e].setIcon(f),d[e].index=e,m[e]=new MapLabel({text:t.name,position:new google.maps.LatLng(t.lat,t.lng),fontSize:14,align:"bottom"}),"saver"===t.type?u[e]='\n          <p class="color-green-dark bold text-medium margin-extra-small">\n            '+d[e].title+" - "+t.distance+' mi\n          </p>\n          <p class="margin-none">'+t.address1+'</p>\n          <a href="#">Get Directions</a>\n        ':u[e]='\n          <p class="color-blue-base bold text-medium margin-extra-small">\n            '+d[e].title+" - "+t.distance+' mi\n          </p>\n          <p class="margin-none">'+t.address1+'</p>\n          <a href="#">Get Directions</a>\n        ',h[e]=new google.maps.InfoWindow({content:u[e]}),d[e].addListener("click",function(){n(h),a(d),"saver"===p[this.index].type?d[this.index].setIcon(w):d[this.index].setIcon(v),h[this.index].open(c,d[this.index]),c.panTo(d[this.index].position)}),h[e].addListener("closeclick",function(){a(d)})}c.addListener("click",function(){n(h),a(d)}),google.maps.event.addDomListener(window,"resize",function(){var e=c.getCenter();google.maps.event.trigger(c,"resize"),c.setCenter(e)})}function t(e,t){for(var n=0;n<e.length;n++)e[n].get("selected")?(e[n].setMap(t),e[n].setIcon(y)):e[n].setMap(t)}function n(e){for(var t=0;t<e.length;t++)e[t].close()}function a(e){for(var t=0;t<e.length;t++)"saver"===p[t].type?e[t].setIcon(y):e[t].setIcon(f)}function i(e){for(var t=new google.maps.LatLngBounds,n=0;n<e.length;n++)t.extend(e[n].getPosition());c.fitBounds(t)}function o(e){for(var t=0;t<e.length;t++)if(e[t].getMap())return!0}$("#zipcode-button").click(function(e){e.preventDefault(),"12345"===$("#zipcode").val()&&$("#countyModal").modal("show")});var s=$(".filter-body-wrapper"),r=$(".filter-button"),l=$(window).width();l>768&&(TweenLite.set(s,{opacity:1,height:"auto",display:"block"}),TweenLite.from(s,.3,{display:"none",height:"0"}),r.attr("data-filter-open","true")),r.click(function(e){e.preventDefault();var t=$(this).attr("data-filter-open");l=$(window).width(),l<=768?"false"===t?(TweenLite.set(s,{opacity:0,height:"auto"}),TweenLite.to(s,.3,{display:"block",opacity:1,top:"85%"}),$(this).attr("data-filter-open","true")):(TweenLite.to(s,.3,{display:"none",opacity:0,top:"50%"}),$(this).attr("data-filter-open","false")):"false"===t?(TweenLite.set(s,{opacity:1,height:"auto",display:"block"}),TweenLite.from(s,.3,{display:"none",height:"0"}),$(this).attr("data-filter-open","true")):(TweenLite.to(s,.3,{display:"none",height:"0"}),$(this).attr("data-filter-open","false"))}),$(".pharmacyFilters").change(function(e){$("#filterNumber").html($(this).find("input[type=checkbox]:checked").length);var n=$(".loading-block");n[0].hasAttribute("load-animating")||(n.show(),n.attr("load-animating","true"),setTimeout(function(){n.fadeOut("fast"),n.removeAttr("load-animating")},300));for(var a,o=$(this).find("input[type=checkbox]:checked"),s=[],r=[],l=0;l<p.length;l++)a=p[l].filters,r=[],o.each(function(e,t){for(var n=0;n<a.length;n++)if(t.value===a[n]){r.push("");break}}),o.length===r.length&&s.push(p[l]);t(d,null),t(m,null);for(var g=[],h=[],u=1,l=0;l<s.length;l++)for(var f=s[l].name,y=0;y<d.length;y++)f===d[y].title&&(g.push(d[y]),h.push(d[y]),d[y].set("label",{text:u,color:"white"}),u++);t(g,c),t(h,c),i(d),Store.set(["PL"],{resultList:s}),0===s.length?(Store.set(["PL"],{hasResults:!1}),$("#collapseMap").collapse("hide")):(Store.set(["PL"],{hasResults:!0}),$("#collapseMap").collapse("show"),i(d))});for(var p=[{lat:44.981672,lng:-93.283818,markerNumber:"1",name:"CVS Pharmacy",address1:"795 Oglethorpe Ave",address2:"Minneapolis, MN 55408",phone:"612-555-5555 (TTY 711)",distance:"0.81",type:"standard",filters:["Standard Network Pharmacy","Open 24 Hours","Mail Order Pharmacy"]},{lat:44.980445,lng:-93.275313,markerNumber:"2",name:"Bob's Club Pharmacy",address1:"347 Mirum Circle",address2:"Minneapolis, MN 55408",phone:"612-555-5555 (TTY 711)",distance:"0.93",type:"saver",filters:["Open 24 Hours","Mail Order Pharmacy","E-Prescribing","Long-Term Care","Home Infusion and Speciality"]},{lat:44.976645,lng:-93.259813,markerNumber:"3",name:"Walblues",address1:"965 Snapple Drive",address2:"Minneapolis, MN 55408",phone:"612-555-5555 (TTY 711)",distance:"1.36",type:"saver",filters:["Open 24 Hours","Mail Order Pharmacy"]},{lat:44.975702,lng:-93.273759,markerNumber:"4",name:"UHCMR Pharmacy",address1:"123 Health Drive",address2:"Minneapolis, MN 55408",phone:"612-555-5555 (TTY 711)",distance:"1.55",type:"standard",filters:["Standard Network Pharmacy","Open 24 Hours","Mail Order Pharmacy"]}],g=0;g<p.length;g++)Store.push(["PL","resultList"],p[g]);$("ul.pharmacy-list > li").hover(function(){var e=$(this).index()-1;if(e>=0){if(o(h))return;p[e]&&("saver"===p[e].type?d[e].setIcon(w):d[e].setIcon(v))}},function(){var e=$(this).index()-1;if(e>=0){if(o(h))return;p[e]&&("saver"===p[e].type?d[e].setIcon(y):d[e].setIcon(f))}}),function(){var e=$("#pharmacy-saver").next().html();p[1].filters.unshift(e),p[2].filters.unshift(e)}();var c,d=[],m=[],h=[],u=[],f={url:"/images/icon-svgs/mapmarker-pill-blue.svg",size:new google.maps.Size(40,40),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(20,20),scaledSize:new google.maps.Size(40,40)},y={url:"/images/icon-svgs/mapmarker-pill-green.svg",size:new google.maps.Size(40,40),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(20,20),scaledSize:new google.maps.Size(40,40)},v={url:"/images/icon-svgs/mapmarker-pin-blue.svg",size:new google.maps.Size(40,40),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(20,40),scaledSize:new google.maps.Size(40,40)},w={url:"/images/icon-svgs/mapmarker-pin-green.svg",size:new google.maps.Size(40,40),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(20,40),scaledSize:new google.maps.Size(40,40)};$(".total-cost");e(),t(d,c),i(d),t(m,c)});