function changeSlide(e,r){var d=r.closest(".card").find(".card-slide[aria-hidden=false]"),a=d.next(),i=d.prev(),o=r.closest(".card-animation-wrapper").outerHeight();d.hide(),d.attr("aria-hidden","true"),"next"===e?(a.show(),a.attr("aria-hidden","false")):"prev"===e&&(i.show(),i.attr("aria-hidden","false")),a.is(":last-of-type")&&$("html, body").animate({scrollTop:a.closest(".card").offset().top-15},300),animateSlide(r,o,e)}function animateSlide(e,r,d){TweenLite.set(e.closest(".card-animation-wrapper"),{height:"auto"}),TweenLite.from(e.closest(".card-animation-wrapper"),.5,{height:r,ease:Power2.easeOut,immediateRender:!1}),"next"===d?TweenLite.fromTo(e.closest(".card-body"),.5,{opacity:"0",transform:"translateY(-20px)"},{opacity:"1",transform:"translateY(0)"}):"prev"===d&&TweenLite.fromTo(e.closest(".card-body"),.5,{opacity:"0",transform:"translateY(20px)"},{opacity:"1",transform:"translateY(0)"})}function addRowToDrugTable(){$(".phr-drug-table tr:not(.drug-row)").after('\n  <tr class="drug-row drug-row__added-by-me" data-row-id="'+drugArr[0].dname+'">\n    <td data-drug-name="'+drugArr[0].dname+'" data-drug-strength="'+drugArr[0].strength+'">\n      <span class="added-drug-name">'+drugArr[0].name+" "+drugArr[0].strength+'</span> <a href="#" class="lowercase added-by-me">Added by me</a>\n      </td>\n    <td data-drug-provider="'+drugArr[0].provider+'">\n      <span class="provider-name">'+drugArr[0].provider+'</span>\n    </td>\n    <td data-drug-frequency="'+drugArr[0].frequency+'">\n      <span class="mobile-table-header">Frequency</span>\n      <div class="table-dots"></div>\n      <span>'+drugArr[0].frequency+'</span>\n    </td>\n    <td data-drug-date="'+drugArr[0].date+'">\n      <span class="mobile-table-header">Date Prescribed</span>\n      <div class="table-dots"></div>\n      <span>'+drugArr[0].date+"</span>\n    </td>\n  </tr>")}function addRowToProviderTable(){$(".phr-provider-table tr:not(.provider-row)").after('\n  <tr class="provider-row provider-row__added-by-me" data-row-id="'+providerArr[0].dname+'">\n      <td data-provider-name="'+providerArr[0].dname+'">\n        <a href="#" class="provider-name">'+providerArr[0].name+'</a> <a href="#" class="lowercase added-by-me">Added by me</a>\n      </td>\n      <td data-provider-specialty="'+providerArr[0].specialty+'">\n        <span class="mobile-table-header">Specialty</span>\n        <div class="table-dots"></div>\n        <span>'+providerArr[0].specialty+'</span>\n      </td>\n      <td data-provider-facility="'+providerArr[0].facility+'" class="print-only">\n        <span class="mobile-table-header">Facility</span>\n        <div class="table-dots"></div>\n        <span>'+providerArr[0].facility+'</span>\n      </td>\n      <td data-provider-city="'+providerArr[0].city+'" data-provider-state="'+providerArr[0].state+'">\n        <span class="mobile-table-header">Location</span>\n        <div class="table-dots"></div>\n        <span>'+providerArr[0].city+'</span>\n      </td>\n      <td data-provider-phone="'+providerArr[0].phone+'" class="print-only">\n        <span class="mobile-table-header">Phone</span>\n        <div class="table-dots"></div>\n        <span>'+providerArr[0].phone+'</span>\n      </td>\n      <td data-provider-date="'+providerArr[0].date+'">\n        <span class="mobile-table-header">Date of Record</span>\n        <div class="table-dots"></div>\n        <span>'+providerArr[0].date+"</span>\n      </td>\n    </tr>"),$carousel.length&&!$carousel.hasClass("slick-initialized")&&initProviderCarousel(),$carousel.slick("slickAdd",'\n  <div class="container-fluid" data-slide-name="'+providerArr[0].dname+'">\n    <div id="viewProviderCarouselModalLabel" class="modal-title">\n      <h1 class="h4 margin-small" id="provider-name" data-provider-name="'+providerArr[0].dname+'">'+providerArr[0].name+'</h1>\n      <span class="primary-care-provider"><a href="#" class="lowercase added-by-me">Added by me</a></span>\n    </div>\n    <div class="row">\n      <div class="col-sm-12">\n        <div class="table-body margin-small">\n          <div class="table-body-row field--row">\n            <div class="table-body-cell">\n              <label for="provider-name">Specialty:</label>\n            </div>\n            <div class="table-body-cell" id="provider-specialty">\n              '+providerArr[0].specialty+'\n            </div>\n          </div>\n          <div class="table-body-row field--row">\n            <div class="table-body-cell">\n              <label for="provider-facility">Facility:</label>\n            </div>\n            <div class="table-body-cell" id="provider-facility">\n              '+providerArr[0].facility+'\n            </div>\n          </div>\n          <div class="table-body-row field--row">\n            <div class="table-body-cell">\n              <label for="provider-city">City:</label>\n            </div>\n            <div class="table-body-cell" id="provider-city">\n              '+providerArr[0].city+'\n            </div>\n          </div>\n          <div class="table-body-row field--row">\n            <div class="table-body-cell">\n              <label for="provider-phone">Phone:</label>\n            </div>\n            <div class="table-body-cell" id="provider-phone">\n              '+providerArr[0].phone+'\n            </div>\n          </div>\n          <div class="table-body-row field--row">\n            <div class="table-body-cell">\n              <label for="provider-date">Date:</label>\n            </div>\n            <div class="table-body-cell" id="provider-date">\n              '+providerArr[0].date+"\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>",!0)}function updateTableTotals(){drugTotal=$(".phr-drug-table tbody tr.drug-row").length,providerTotal=$(".phr-provider-table").find("tr.provider-row").length,$(".show-drug-btn").show(),$(".show-provider-btn").show(),$(".drug-showing-total").html($(".phr-drug-table tr.drug-row:not(.row-hidden), .phr-drug-table tr.drug-row.row-visible").length),$(".drug-total").text(drugTotal),$(".provider-showing-total").html($(".phr-provider-table tr.provider-row:not(.row-hidden), .phr-provider-table tr.provider-row.row-visible").length),$(".provider-total").text(providerTotal),$(".show-drug-btn, .show-provider-btn").show(),drugTotal<=7&&$(".show-drug-btn").hide(),providerTotal<=7&&$(".show-provider-btn").hide(),$(window).innerWidth()<768&&($(".show-provider-btn").show(),providerTotal<=4&&$(".show-provider-btn").hide())}function showRecords(e){$(".phr-table tr:not(:first-child)").each(function(){$(this).removeClass("row-hidden row-visible"),$(this).index()>e&&$(this).addClass("row-hidden")})}function getDataObject(e){var r={};return e.find("td").each(function(){var e=$(this).data();for(var d in e)r[d]="--"==e[d]?"":e[d]}),r}function showProviderCarouselModal(e){$("#provider-carousel").data("slide-index",e-1),$("#viewProviderCarouselModal").modal("toggle")}function showProviderModal(e){var r=getDataObject(e);$("#viewProviderModal #provider-name").text(e.find(".provider-name").text()),$("#viewProviderModal #provider-specialty").text(r.providerSpecialty),$("#viewProviderModal #provider-facility").text(r.providerFacility),$("#viewProviderModal #provider-city").text(r.providerCity),$("#viewProviderModal #provider-state").text(r.providerState),$("#viewProviderModal #provider-date").text(r.providerDate),$("#viewProviderModal #provider-phone").text(r.providerPhone),$("#viewProviderModal").modal("toggle")}function showDrugModal(e){var r=getDataObject(e),d=e.find(".added-drug-name").text();$("#viewDrugModal").data("row-id",r.drugName),$("#viewDrugModal #drug-name").val(d),$("#viewDrugModal #drug-strength").val(r.drugStrength),$("#viewDrugModal #drug-frequency").val(r.drugFrequency),$("#viewDrugModal #drug-provider").val(r.drugProvider);var a=r.drugDate.split("/");a.length>1&&$("#viewDrugModal #drug-date").val(a[2]+"-"+a[0]+"-"+a[1]),$("#viewDrugModal").modal("toggle")}function showEditProviderModal(e){var r=getDataObject(e),d=e.find(".provider-name").text();$("#editProviderModal").data("row-id",e.data("row-id")),$("#editProviderModal #provider-name").val(d),$("#editProviderModal #provider-specialty").val(r.providerSpecialty),$("#editProviderModal #provider-facility").val(r.providerFacility),$("#editProviderModal #provider-city").val(r.providerCity),$("#editProviderModal #provider-state").val(r.providerState),$("#editProviderModal #provider-state").val(r.providerDate);var a=r.providerDate.split("/");a.length>1&&$("#editProviderModal #provider-date").val(a[2]+"-"+a[0]+"-"+a[1]),$("#editProviderModal #provider-phone").val(r.providerPhone),$("#editProviderModal").modal("toggle")}function scrollToElement(e,r,d){r="undefined"!=typeof r?r:1e3,d="undefined"!=typeof d?d:0,element=$(e),offset=element.offset(),offsetTop=offset.top+d,$("html, body").animate({scrollTop:offsetTop},r)}function formatDate(e){if(e.indexOf("/")>-1)return e;var r=e.split("-"),d=r[1]+"/"+r[2]+"/"+r[0];return d}function resetShowAllButton(){$(".show-drug-btn, .show-provider-btn").removeClass("showingAll"),$(".show-drug-btn, .show-provider-btn").text("Show All")}function initProviderCarousel(){$carousel.slick({adaptiveHeight:!0,infinite:!1,nextArrow:$(".slick-next--provider"),prevArrow:$(".slick-prev--provider"),initialSlide:$carousel.data("slide-index")})}function removeFromCarousel(e){$carousel.slick("slickRemove",$carousel.find("[data-slide-name='"+e+"']").data("slick-index"))}var drugArr=[],providerArr=[],providerModal=[],drugTotal=0,providerTotal=0,$carousel=$("#provider-carousel");$(document).ready(function(){$(".phr-drug-table").addClass("phr-drug-table--isLoaded"),$(".logo-container .logo-divider, .logo-container img:last-of-type").hide();new Date;$(window).on("resize",function(){updateTableTotals(),$("body").hasClass("expanded")||(resetShowAllButton(),showRecords($(window).innerWidth()<768?4:7)),updateTableTotals()}).trigger("resize"),$(document).on("click",".provider-row",function(e){e.preventDefault(),$(e.target).hasClass("added-by-me")||showProviderCarouselModal($(this).index())}),$(document).on("click",".drug-row a.added-by-me",function(e){e.preventDefault(),showDrugModal($(this).closest(".drug-row"))}),$(document).on("click",".provider-row a.added-by-me",function(e){e.preventDefault(),showEditProviderModal($(this).closest(".provider-row"))}),$(document).on("click",".primary-care-provider a.added-by-me",function(e){e.preventDefault();var r=$(this).closest(".container-fluid").data("slide-name"),d=$(".phr-provider-table").find("td[data-provider-name="+r+"]");$("#viewProviderCarouselModal").modal("hide");setTimeout(function(){showEditProviderModal(d.closest(".provider-row"))},500)}),$(".phr-print-button").on("click",function(e){e.preventDefault(),window.print()}),$(".show-drug-btn").on("click",function(e){e.preventDefault();var r=$(".phr-drug-table tr.row-hidden");$(this).hasClass("showingAll")?($(this).removeClass("showingAll"),r.removeClass("row-visible"),$(this).text("Show All"),$("body").removeClass("expanded")):($(this).addClass("showingAll"),r.addClass("row-visible"),$(this).text("Show Fewer"),$("body").addClass("expanded")),updateTableTotals(),scrollToElement("#Drugs",500,-30)}),$(".show-provider-btn").on("click",function(e){e.preventDefault();var r=$(".phr-provider-table").find("tr.row-hidden");$(this).hasClass("showingAll")?($(this).removeClass("showingAll"),r.removeClass("row-visible"),$(this).text("Show All"),$("body").removeClass("expanded")):($(this).addClass("showingAll"),r.addClass("row-visible"),$(this).text("Show Fewer"),$("body").addClass("expanded")),updateTableTotals(),scrollToElement("#Providers",500,-30)}),$(".delete-provider-btn").on("click",function(e){changeSlide("next",$(this)),$("#editProviderModal").find(".modal-title h1").text("Delete Provider")}),$(".delete-provider-yes").on("click",function(){var e=$("#editProviderModal").data("row-id");$(".phr-provider-table").find("[data-row-id='"+e+"']").remove(),updateTableTotals(),$("#editProviderModal").find(".modal-title h1").text("Edit or Delete Provider"),$("#editProviderModal").modal("hide"),removeFromCarousel(e)}),$(".delete-provider-no").on("click",function(){changeSlide("prev",$(this)),$("#editProviderModal").find(".modal-title h1").text("Delete Provider")}),$(".save-provider-btn").on("click",function(){var e=$("#edit-provider-form").valid(),r=$("#editProviderModal").data("row-id");if(e){$(".phr-provider-table").find("[data-row-id='"+r+"']").remove();var d={name:$('#edit-provider-form input[name="provider-name"]'),specialty:$('#edit-provider-form select[name="provider-specialty"]'),city:$('#edit-provider-form input[name="provider-city"]'),state:$('#edit-provider-form input[name="provider-state"]'),facility:$('#edit-provider-form input[name="provider-facility"]'),phone:$('#edit-provider-form input[name="provider-phone"]'),date:$('#edit-provider-form input[name="provider-date"]')},a={};a.name=d.name.val(),a.specialty=d.specialty.val()||"--",a.facility=d.facility.val()||"--",a.city=d.city.val()||"--",a.phone=d.phone.val()||"--",a.date=d.date.val()?formatDate(d.date.val()):"--",providerArr.pop(),providerArr.push(a),removeFromCarousel(r),addRowToProviderTable(),updateTableTotals(),$("#editProviderModal").modal("hide"),document.getElementById("edit-provider-form").reset()}}),$(".delete-drug-btn").on("click",function(e){changeSlide("next",$(this)),$("#viewDrugModal").find(".modal-title h1").text("Delete Drug")}),$(".delete-drug-yes").on("click",function(){var e=$("#viewDrugModal").data("row-id");$(".phr-drug-table").find("[data-row-id='"+e+"']").remove(),updateTableTotals(),$("#viewDrugModal").find(".modal-title h1").text("Edit or Delete Drug"),$("#viewDrugModal").modal("hide")}),$(".delete-drug-no").on("click",function(){changeSlide("prev",$(this)),$("#viewDrugModal").find(".modal-title h1").text("Edit or Delete Drug")}),$(".save-drug-btn").on("click",function(e){e.preventDefault();var r=$("#edit-drug-form").valid(),d=$("#viewDrugModal").data("row-id");if(r){$(".phr-drug-table").find("[data-row-id='"+d+"']").remove();var a={name:$('#edit-drug-form input[name="drug-name"]'),frequency:$('#edit-drug-form input[name="drug-frequency"]'),strength:$('#edit-drug-form input[name="drug-strength"]'),provider:$('#edit-drug-form input[name="drug-provider"]'),date:$('#edit-drug-form input[name="drug-date"]')},i={};i.name=a.name.val(),i.frequency=a.frequency.val()||"--",i.strength=a.strength.val()||"",i.provider=a.provider.val()||"--",i.date=a.date.val()?formatDate(a.date.val()):"--",drugArr.pop(),drugArr.push(i),addRowToDrugTable(),updateTableTotals(),$("#viewDrugModal").modal("hide"),document.getElementById("edit-drug-form").reset()}}),$(".add-drug-form-button").on("click",function(e){e.preventDefault();var r=$("#add-drug-form").valid();if(r){var d={name:$('#add-drug-form input[name="drug-name"]'),frequency:$('#add-drug-form input[name="drug-frequency"]'),strength:$('#add-drug-form input[name="drug-strength"]'),provider:$('#add-drug-form input[name="drug-provider"]'),date:$('#add-drug-form input[name="drug-date"]')},a={},i=d.name.val();a.dname=i.replace(/\W+/g,"-").toLowerCase(),a.name=d.name.val(),a.frequency=d.frequency.val()||"--",a.strength=d.strength.val()||"",a.provider=d.provider.val()||"--",a.date=d.date.val()?formatDate(d.date.val()):"--",drugArr.pop(),drugArr.push(a),addRowToDrugTable(),updateTableTotals(),$("#addDrugModal").modal("hide"),document.getElementById("add-drug-form").reset()}}),$(".add-provider-form-button").on("click",function(e){e.preventDefault();var r=$("#add-provider-form").valid();if(r){var d={name:$('#add-provider-form input[name="provider-name"]'),specialty:$('#add-provider-form select[name="provider-specialty"]'),city:$('#add-provider-form input[name="provider-city"]'),state:$('#add-provider-form input[name="provider-state"]'),facility:$('#add-provider-form input[name="provider-facility"]'),phone:$('#add-provider-form input[name="provider-phone"]'),date:$('#add-provider-form input[name="provider-date"]')},a={},i=d.name.val();a.dname=i.replace(/\W+/g,"-").toLowerCase(),a.name=d.name.val(),a.specialty=d.specialty.val()||"--",a.facility=d.facility.val()||"--",a.city=d.city.val()||"--",a.phone=d.phone.val()||"--",a.date=d.date.val()?formatDate(d.date.val()):"--",providerArr.pop(),providerArr.push(a),addRowToProviderTable(),updateTableTotals(),$("#addProviderModal").modal("hide"),document.getElementById("add-provider-form").reset()}});var e=$("#add-drug-form").validate({rules:{"drug-name":"required"},highlight:function(e){$(e).closest(".field--row").addClass("field-has-error")},unhighlight:function(e){$(e).closest(".field--row").removeClass("field-has-error")},errorPlacement:function(e,r){r.closest(".field--row").find(".table-body-cell:nth-of-type(2)").append(e)}}),r=$("#edit-drug-form").validate({rules:{"drug-name":"required"},highlight:function(e){$(e).closest(".field--row").addClass("field-has-error")},unhighlight:function(e){$(e).closest(".field--row").removeClass("field-has-error")},errorPlacement:function(e,r){r.closest(".field--row").find(".table-body-cell:nth-of-type(2)").append(e)}}),d=$("#add-provider-form").validate({rules:{"provider-name":"required"},highlight:function(e){$(e).closest(".field--row").addClass("field-has-error")},unhighlight:function(e){$(e).closest(".field--row").removeClass("field-has-error")},errorPlacement:function(e,r){r.closest(".field--row").find(".table-body-cell:nth-of-type(2)").append(e)}});$("#edit-provider-form").validate({rules:{"provider-name":"required"},highlight:function(e){$(e).closest(".field--row").addClass("field-has-error")},unhighlight:function(e){$(e).closest(".field--row").removeClass("field-has-error")},errorPlacement:function(e,r){r.closest(".field--row").find(".table-body-cell:nth-of-type(2)").append(e)}});$("#email-records-form").validate({rules:{"message-email":"required","message-email-confirm":"required"},highlight:function(e){$(e).closest(".field").addClass("field-has-error")},unhighlight:function(e){$(e).closest(".field").removeClass("field-has-error")},errorPlacement:function(e,r){r.closest(".field").find(".table-body-cell:nth-of-type(2)").append(e)}}),$("input[name=message-email-type]").change(function(e){$("#message-new-email").is(":checked")?$("#new-email-fields").removeClass("hidden"):$("#new-email-fields").addClass("hidden")}),$("#email-records-form").submit(function(e){e.preventDefault();var r=$("#email-records-form").valid(),d=$(this).find("input[type=radio]:checked").val();"message-old-email"===d?(changeSlide("next",$(this)),$(".email-cancel-link").hide()):r&&(changeSlide("next",$(this)),$(".email-cancel-link").hide())}),$("#message-send").on("click",function(e){changeSlide("prev",$(this))}),$("#addDrugModal, #addProviderModal").on("show.bs.modal",function(e){$(this).find("form").get(0).reset()}),$("#viewProviderCarouselModal").on("shown.bs.modal",function(e){$(this).find("provider-carousel").focus(),$carousel.length&&!$carousel.hasClass("slick-initialized")?initProviderCarousel():$carousel.slick("slickGoTo",$carousel.data("slide-index"),!0)}),$("#viewDrugModal").on("hidden.bs.modal",function(e){$("#viewDrugModal .card-slide:first-child").show(),$("#viewDrugModal .card-slide:first-child").attr("aria-hidden","false"),$("#viewDrugModal .card-slide:last-child").hide(),$("#viewDrugModal .card-slide:last-child").attr("aria-hidden","true"),$("#viewDrugModal").find(".modal-title h1").text("Edit or Delete Drug"),document.getElementById("edit-drug-form").reset()}),$("#editProviderModal").on("hidden.bs.modal",function(e){$("#editProviderModal .card-slide:first-child").show(),$("#editProviderModal .card-slide:first-child").attr("aria-hidden","false"),$("#editProviderModal .card-slide:last-child").hide(),$("#editProviderModal .card-slide:last-child").attr("aria-hidden","true"),$("#editProviderModal").find(".modal-title h1").text("Edit or Delete Provider"),document.getElementById("edit-provider-form").reset()}),$("#addProviderModal, #editProviderModal").on("hidden.bs.modal",function(e){$(this).find(".field--row").removeClass("field-has-error"),d.resetForm()}),$("#addDrugModal, #viewDrugModal").on("hidden.bs.modal",function(d){$(this).find(".field--row").removeClass("field-has-error"),e.resetForm(),r.resetForm()}),$("#viewDrugModal, #editProviderModal, #addDrugModal, #addProviderModal").modalTabbing(),$(window.document).on("shown.bs.modal",".modal",function(){window.setTimeout(function(){$("[data-modalfocus]",this).focus()}.bind(this),100)})}),function(e){e.fn.modalTabbing=function(){var r=function(r){var d=e(r).find("select, input, textarea, button, a[href]").filter(":visible").not(":disabled");d.first().focus(),e(r).on("keydown",function(d){if(9===d.which){var a=e(r).find("select, input, textarea, button, a[href]").filter(":visible").not(":disabled");d.shiftKey?a[0]===d.target&&(d.preventDefault(),a.last().focus()):a[a.length-1]===d.target&&(d.preventDefault(),a.first().focus())}})};return this.each(function(){r(this)})}}(jQuery);