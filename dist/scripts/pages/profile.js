$(document).ready(function(){function e(e){var s,a,t;s=e,a=s.closest(".card-animation-wrapper"),a.hasClass("adding")?(t="next",a.addClass("added")):t=a.hasClass("added")?"next":"prev",a.removeClass("editing adding"),r(t,s)}function r(e,r){var t=r.closest(".card").find(".card-slide[aria-hidden=false]"),o=t.next(),d=t.prev(),i=r.closest(".card-animation-wrapper").outerHeight();t.hide(),t.attr("aria-hidden","true"),"next"===e?(o.show(),o.attr("aria-hidden","false")):"prev"===e&&(d.show(),d.attr("aria-hidden","false")),o.is(":last-of-type")&&$("html, body").animate({scrollTop:o.closest(".card").offset().top-15},300),a(),s(r,i,e);var l=window.location.pathname;if(l.indexOf("iframe")>=0){var n=$(parent.document).find("iframe");n.each(function(e,r){TweenLite.to($(this),.5,{height:r.contentWindow.document.body.offsetHeight+"px",ease:Power2.easeOut})})}}function s(e,r,s){TweenLite.set(e.closest(".card-animation-wrapper"),{height:"auto"}),TweenLite.from(e.closest(".card-animation-wrapper"),.5,{height:r,ease:Power2.easeOut,immediateRender:!1}),"next"===s?TweenLite.fromTo(e.closest(".card-body"),.5,{opacity:"0",transform:"translateY(-20px)"},{opacity:"1",transform:"translateY(0)"}):"prev"===s&&TweenLite.fromTo(e.closest(".card-body"),.5,{opacity:"0",transform:"translateY(20px)"},{opacity:"1",transform:"translateY(0)"})}function a(){$(".row").each(function(e,r){$(r).find(".card-animation-wrapper:not(.adding, .editing) .card").matchHeight({byRow:!1,property:"min-height"})})}function t(e,r,s){var a=[];if(s)for(r;r>=e;r--)1===r.toString().length?a.push("0"+r.toString()):a.push(r.toString());else for(e;e<=r;e++)1===e.toString().length?a.push("0"+e.toString()):a.push(e.toString());return a}function o(e,r){var s=$(e.content());if(s.children().length<=0)return!1}function d(e,r){function s(e,r){var s=e.attr("class"),a=!0;t.each(function(e,o){$(this).hasClass(s)&&("add"===r?a=!1:"remove"===r&&(t.splice(e,1),d=!0))}),a&&"add"===r&&(d=!0,l.push(e))}var a=e.split(""),t=$(r.content()).find("p"),o=$(r.elementOrigin()).attr("type"),d=!1,l=[];if("password"===o){var n=$('<p class="password-length">At least 8 characters</p>'),c=$('<p class="password-number">At least 1 number</p>'),f=$('<p class="password-uppercase">An uppercase letter</p>'),h=$('<p class="password-lowercase">A lowercase letter</p>'),p=$('<p class="password-special">At least 1 special character (@_-,#)</p>'),u=$('<p class="password-username">Cannot be the same as username</p>'),m=$('<p class="password-firstname">Cannot be first name</p>'),g=$('<p class="password-lastname">Cannot be last name</p>'),v=$('<p class="password-repeat">Cannot contain four or more repeating numbers, letters, or characters</p>'),C=$('<p class="password-sequential">Cannot contain three or more sequential numbers or letters (123, ABC)</p>'),w=$('<p class="password-spaces">No spaces</p>'),b=$('<p class="password-member">Cannot use your member ID number</p>'),D=null!==e.match(/(.)\1\1\1+/g),Y=!1,q=!1,M=!1,y=!1,P=!1;a.length<8?s(n,"add"):s(n,"remove");for(i in a){var k=parseInt(i),x=a[k];if($.isNumeric(x)&&(Y=!0),x!==x.toUpperCase()||$.isNumeric(x)||/^[a-zA-Z0-9]*$/.test(x)!==!0||(q=!0),x!==x.toLowerCase()||$.isNumeric(x)||/^[a-zA-Z0-9]*$/.test(x)!==!0||(M=!0),k+2<=a.length-1){var S=function(e){var r=[];for(character in e){if(/^[a-zA-Z0-9]*$/.test(e[character])!==!0){r=[];break}r.push(e[character])}return r},T=S([a[k],String.fromCharCode(a[k].charCodeAt(0)+1),String.fromCharCode(a[k].charCodeAt(0)+2)]),A=S([a[k],a[k+1],a[k+2]]);if(T.length===A.length){var L=A.every(function(e,r){return e===T[r]});L&&(y=!0)}}x.indexOf(" ")>=0&&(P=!0)}Y?s(c,"remove"):s(c,"add"),q?s(f,"remove"):s(f,"add"),M?s(h,"remove"):s(h,"add"),/^[a-zA-Z0-9 ]*$/.test(e)===!1?s(p,"remove"):s(p,"add"),$("#username").length>0&&($("#username").val()===e&&""!==e?s(u,"add"):s(u,"remove")),"john"===e.toLowerCase()?s(m,"add"):s(m,"remove"),"smith"===e.toLowerCase()?s(g,"add"):s(g,"remove"),D?s(v,"add"):s(v,"remove"),y?s(C,"add"):s(C,"remove"),P?s(w,"add"):s(w,"remove"),"12345"===e?s(b,"add"):s(b,"remove")}if(d===!0){var N='<div id="tooltip-username">';t.each(function(e,r){N+=$(this).prop("outerHTML")});for(i in l)N+=l[i].prop("outerHTML");N+="</div>",r.content(N),0===t.length&&0===l.length?r.close():!r.status().open&&$("#"+o).is(":focus")&&r.open()}}a(),$(".card .cancel-btn").click(function(e){var s,a,t;s=$(this),a=s.closest(".card-animation-wrapper"),e.preventDefault(),t=a.hasClass("added")?"next":"prev",$(this).closest(".card-animation-wrapper").removeClass("editing"),r(t,s)}),$(".card .edit-btn").click(function(e){var s,a,t;s=$(this),a=s.closest(".card-animation-wrapper"),e.preventDefault(),t=a.hasClass("added")?"prev":"next",s.closest(".card-animation-wrapper").addClass("editing"),r(t,s)}),$(".card .add-address-btn").click(function(e){e.preventDefault(),$(this).closest(".card-animation-wrapper").addClass("editing"),r("next",$(this))}),$("#save-prefs-btn").click(function(e){var r=$(this).parents(".card");e.preventDefault();var s=$("#preferences-form").valid();s&&($(".prefs-content",r).hide(),$(".prefs-confirm",r).show())}),$("#save-prefs-btn2").click(function(e){var r=$(this).parents(".card");e.preventDefault();var s=$("#preferences-form2").valid();s&&($(".prefs-content",r).hide(),$(".prefs-confirm",r).show())}),$(".edit-prefs-btn").click(function(e){var r=$(this).parents(".card");e.preventDefault(),$(".prefs-content",r).show(),$(".prefs-confirm",r).hide()}),$(".on-off-toggle").on("change",function(e){1==$(this).prop("checked")?($(this).parents(".card").find(".go-green-thanks").show(),$(this).parents(".card").find('input[value="Email"]').trigger("click")):($(this).parents(".card").find(".go-green-thanks").hide(),$(this).parents(".card").find('input[value="Mail"]').trigger("click"))}),$(".card").find(".card-slide[aria-hidden=false]").show(),$(".card").find(".cancel-btn[aria-hidden=true]").hide(),$(".card").find(".edit-btn[aria-hidden=true]").hide(),$(".card").hasClass("is-opted-in")&&($(".prefs-content",".card").hide(),$(".prefs-confirm",".card").show());var l=window.location.pathname;if(l.indexOf("iframe")>=0){var n=$(parent.window);n.resize(function(e){$(this).innerWidth()>=992?($("#small").addClass("hidden"),$("#large").removeClass("hidden")):($("#large").addClass("hidden"),$("#small").removeClass("hidden"))})}$("#add-to-plan").click(function(e){e.preventDefault();var r=$("#register-form").valid();if(r){var s=$("#multiple-member-id").val();"12345"===s?($(".no-plan").addClass("hidden"),$(".additional-warning").addClass("hidden"),$("#existingPlanModal").modal("show")):"54321"===s?($(".additional-warning").removeClass("hidden"),$(".no-plan").addClass("hidden"),$("#multiple-member-id").closest(".field").addClass("field-has-error")):"11111"===s?($(".additional-warning").addClass("hidden"),$(".no-plan").removeClass("hidden"),$("#multiple-member-id").closest(".field").addClass("field-has-error")):""!==s&&($(".additional-warning").addClass("hidden"),$(".no-plan").addClass("hidden"),$("#addPlanModal").modal("show"))}}),$("#address-1-form button").click(function(r){r.preventDefault();var s=$("#address-1-form").valid();s&&(e($(this)),setTimeout(function(){$("#address-2-form").parents(".card-animation-wrapper").removeClass("hidden")},400))}),$("#address-2-form button").click(function(r){r.preventDefault();var s=$("#address-2-form").valid();s&&e($(this))}),$("#email-form button").click(function(r){r.preventDefault();var s=$("#email-form").valid();s&&e($(this))}),$("#phone-form button").click(function(r){r.preventDefault();var s=$("#phone-form").valid();s&&e($(this))}),$("#password-form button").click(function(r){r.preventDefault();var s=$("#password-form").valid();s&&e($(this))}),$.validator.addMethod("password",function(e,r){var s=$(c.content()).children().length;return this.optional(r)||s<=0},"Password does not meet requirements."),jQuery.validator.addMethod("phoneUS",function(e,r){return e=e.replace(/\s+/g,""),this.optional(r)||e.length>9&&e.match(/^(\+?1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/)},"Please specify a valid phone number"),$("#password-form").validate({rules:{passwordOld:{password:!0,required:!0},passwordNew:{password:!0,required:!0},passwordNewConfirm:{required:!0,equalTo:"#passwordNew"}},highlight:function(e){$(e).closest(".radio-group").length>0?$(e).closest(".radio-group").addClass("field-has-error"):$(e).closest(".field--dob").length>0?$(e).closest(".field--dob").addClass("field-has-error"):$(e).closest(".field").addClass("field-has-error"),$(e).closest("form").find("legend").addClass("field-has-error")},unhighlight:function(e){if($(e).closest(".radio-group").length>0)$(e).closest(".radio-group").removeClass("field-has-error");else if($(e).closest(".field--dob").length>0){var r=!1;$(e).closest(".field--dob").find("select").each(function(e,s){""!==$(this).val()&&$(this).val()||(r=!0)}),r||$(e).closest(".field--dob").removeClass("field-has-error")}else $(e).closest(".field").removeClass("field-has-error"),$(e).closest(".field").find(".error").remove();$(e).closest("form").find("legend").removeClass("field-has-error")},errorPlacement:function(e,r){$(r).closest(".radio-group").length>0?$(r).closest(".radio-group").append(e):$(r).closest(".field--dob").length>0?r.closest(".field--dob").append(e):r.closest(".field").find(".error").length<=0&&$(r).closest(".field").append(e)}}),$("#address-1-form").validate({rules:{altStreet:"required",altCity:"required",altState:"required",altZip:"required",startDateMM:{dob:!0,required:!0},startDateDD:{dob:!0,required:!0},startDateYYYY:{dob:!0,required:!0},endDateMM:{dob:!0,required:!0},endDateDD:{dob:!0,required:!0},endDateYYYY:{dob:!0,required:!0}},groups:{dobGroup1:"startDateMM startDateDD startDateYYYY",dobGroup2:"endDateMM endDateDD endDateYYYY"},highlight:function(e){$(e).closest(".radio-group").length>0?$(e).closest(".radio-group").addClass("field-has-error"):$(e).closest(".field--dob").length>0?$(e).closest(".field--dob").addClass("field-has-error"):$(e).closest(".field").addClass("field-has-error"),$(e).closest("form").find("legend").addClass("field-has-error")},unhighlight:function(e){if($(e).closest(".radio-group").length>0)$(e).closest(".radio-group").removeClass("field-has-error");else if($(e).closest(".field--dob").length>0){var r=!1;$(e).closest(".field--dob").find("select").each(function(e,s){""!==$(this).val()&&$(this).val()||(r=!0)}),r||$(e).closest(".field--dob").removeClass("field-has-error")}else $(e).closest(".field").removeClass("field-has-error"),$(e).closest(".field").find(".error").remove();$(e).closest("form").find("legend").removeClass("field-has-error")},errorPlacement:function(e,r){$(r).closest(".radio-group").length>0?$(r).closest(".radio-group").append(e):$(r).closest(".field--dob").length>0?r.closest(".field--dob").append(e):r.closest(".field").find(".error").length<=0&&$(r).closest(".field").append(e)}}),$("#address-2-form").validate({rules:{alt2Street:"required",altCity2:"required",altState2:"required",altZip2:"required",startDateMM2:{dob:!0,required:!0},startDateDD2:{dob:!0,required:!0},startDateYYYY2:{dob:!0,required:!0},endDateMM2:{dob:!0,required:!0},endDateDD2:{dob:!0,required:!0},endDateYYYY2:{dob:!0,required:!0}},groups:{dobGroup1:"startDateMM2 startDateDD2 startDateYYYY2",dobGroup2:"endDateMM2 endDateDD2 endDateYYYY2"},highlight:function(e){$(e).closest(".radio-group").length>0?$(e).closest(".radio-group").addClass("field-has-error"):$(e).closest(".field--dob").length>0?$(e).closest(".field--dob").addClass("field-has-error"):$(e).closest(".field").addClass("field-has-error"),$(e).closest("form").find("legend").addClass("field-has-error")},unhighlight:function(e){if($(e).closest(".radio-group").length>0)$(e).closest(".radio-group").removeClass("field-has-error");else if($(e).closest(".field--dob").length>0){var r=!1;$(e).closest(".field--dob").find("select").each(function(e,s){""!==$(this).val()&&$(this).val()||(r=!0)}),r||$(e).closest(".field--dob").removeClass("field-has-error")}else $(e).closest(".field").removeClass("field-has-error"),$(e).closest(".field").find(".error").remove();$(e).closest("form").find("legend").removeClass("field-has-error")},errorPlacement:function(e,r){$(r).closest(".radio-group").length>0?$(r).closest(".radio-group").append(e):$(r).closest(".field--dob").length>0?r.closest(".field--dob").append(e):r.closest(".field").find(".error").length<=0&&$(r).closest(".field").append(e)}}),$.validator.addMethod("dob",function(e,r){var s=!1;return $(r).closest(".field--dob").find("select").each(function(e,r){""!==$(this).val()&&$(this).val()||(s=!0)}),!s},"Please complete all date fields."),$("#register-form").validate({rules:{"multiple-member-id":"required"},highlight:function(e){$(e).closest(".field").addClass("field-has-error")},unhighlight:function(e){$(e).closest(".field").removeClass("field-has-error")},errorPlacement:function(e,r){r.closest(".field").append(e)}}),$("#email-form").validate({rules:{emailNew:{required:!0,email:!0},emailNewConfirm:{required:!0,equalTo:"#emailNew"}},highlight:function(e){$(e).closest(".field").addClass("field-has-error")},unhighlight:function(e){$(e).closest(".field").removeClass("field-has-error")},errorPlacement:function(e,r){r.closest(".field").append(e)}}),$("#phone-form").validate({rules:{daytimePhone:{required:!0,phoneUS:!0},eveningPhone:{required:!0,phoneUS:!0}},highlight:function(e){$(e).closest(".field").addClass("field-has-error")},unhighlight:function(e){$(e).closest(".field").removeClass("field-has-error")},errorPlacement:function(e,r){r.closest(".field").append(e)}}),$("#preferences-form").validate({rules:{goPaperless:"required"},messages:{goPaperless:'<img src="/images/icon-svgs/important.svg" alt="Error" class="img-text"> You must agree to the terms and conditions'},highlight:function(e){$(e).closest(".radio-group").length>0?$(e).closest(".radio-group").addClass("field-has-error"):$(e).closest(".field").addClass("field-has-error"),$(e).closest("form").find("legend").addClass("field-has-error")},unhighlight:function(e){$(e).closest(".radio-group").length>0?$(e).closest(".radio-group").removeClass("field-has-error"):$(e).closest(".field").removeClass("field-has-error"),$(e).closest("form").find("legend").removeClass("field-has-error")},errorPlacement:function(e,r){$(r).closest(".radio-group").length>0?$(r).closest(".radio-group").append(e):$(r).closest(".field").append(e)}}),$("#preferences-form2").validate({rules:{goPaperless2:"required"},messages:{goPaperless2:'<img src="/images/icon-svgs/important.svg" alt="Error" class="img-text"> You must agree to the terms and conditions'},highlight:function(e){$(e).closest(".radio-group").length>0?$(e).closest(".radio-group").addClass("field-has-error"):$(e).closest(".field").addClass("field-has-error"),$(e).closest("form").find("legend").addClass("field-has-error")},unhighlight:function(e){$(e).closest(".radio-group").length>0?$(e).closest(".radio-group").removeClass("field-has-error"):$(e).closest(".field").removeClass("field-has-error"),$(e).closest("form").find("legend").removeClass("field-has-error")},errorPlacement:function(e,r){$(r).closest(".radio-group").length>0?$(r).closest(".radio-group").append(e):$(r).closest(".field").append(e)}}),$("#add-plan-confirm").on("click",function(e){e.preventDefault(),document.location="/profile/profile-combo.html"}),$(".tooltip-password").tooltipster({content:$("#tooltip-password"),contentCloning:!0,contentAsHTML:!0,interactive:!0,trigger:"custom",maxWidth:250,side:"right",functionBefore:o});var c=$(".tooltip-password").tooltipster("instance"),f=($("#username"),$("#passwordNew"));f.length>0&&d(f.val(),c),f.focus(function(e){c.open()}),f.blur(function(e){c.close()}),f.keyup(function(e){d($(this).val(),c)}),$(".address-form").each(function(e){e>=1?e+=1:e="",e=e.toString();var r=($(this),document.getElementById("startDateMM"+e),document.getElementById("startDateDD"+e),document.getElementById("startDateYYYY"+e),document.getElementById("endDateMM"+e),document.getElementById("endDateDD"+e),document.getElementById("endDateYYYY"+e),t(1,12)),s=t(1,31),a=t(1930,2017,!0);$("#startDateMM"+e).select2({data:r,placeholder:" "}),$("#startDateDD"+e).select2({data:s,placeholder:" "}),$("#startDateYYYY"+e).select2({data:a,placeholder:" "}),$("#endDateMM"+e).select2({data:r,placeholder:" "}),$("#endDateDD"+e).select2({data:s,placeholder:" "}),$("#endDateYYYY"+e).select2({data:a,placeholder:" "})})});